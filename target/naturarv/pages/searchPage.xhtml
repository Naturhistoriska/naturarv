<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:p="http://primefaces.org/ui"   >

    <body onunload="leavingPage()"> 


        <ui:composition template="/templates/defaultLayout.xhtml">

        <ui:define name="content">   
            
            <h:form id="searchform" > 
                 
                <!-- ************************************** session control ***************************************** -->
                <p:idleMonitor timeout="1800000000" >  
                    <p:ajax event="idle" listener="#{idleMonitorController.idleListener}" update="messages" />   
                </p:idleMonitor>  

                <h:panelGrid  styleClass="innerpanel"  cellpadding="0" cellspacing="0">    
                    <p:messages id="messages" autoUpdate="true" showDetail="true" showSummary="false" closable="true"   showIcon="true" />
                    <!-- ************************************** progress div ************************************* -->    
                    <p:dialog id="progressdialog" closable="true"  widgetVar="progressdlg"   draggable="true" header="#{msg.progress}" position="center, 200" >
                        <h:panelGrid columns="2" columnClasses="progresscol1, progresscol2">
                            <h:column  />
                            <h:column />
                            <h:graphicImage library="images" name="ajax-loader.gif" alt="#{msg.progress}" title="#{msg.progress}" styleClass="images" />
                            <h:outputText value="#{msg.wait}" style="font-size: 16px; font-weight: bold;" />
                            <h:column />
                            <h:column />
                        </h:panelGrid>  
                    </p:dialog>
                   
                    <!-- ************************************** image switch div ************************************* -->     
                    <p:dialog id="imgswitchdialog" closable="true"  widgetVar="imgswitchdlg"   
                              draggable="false" header="#{msg.imageswitcher} (#{msg.imgmouseover})" > 
                        <p:panel id="imageswitchpanel">
                            <p:galleria id="images" widgetVar="gallery" value="#{imageSwitcher.thumbs}" 
                                        panelWidth="420" panelHeight="500"   autoPlay="false"
                                        var="thumb"  showCaption="true" >    
                                <p:graphicImage value="#{thumb}" alt="#{imageSwitcher.catalogNumber}" 
                                                title="#{imageSwitcher.scientificName}"  styleClass="imageswithpedding" />     

                            </p:galleria>     
                            <p:contextMenu for="images" style="z-index:50; font-size: 10px;">  
                                <p:menuitem value="Morphbank" url="http://morphbank.nrm.se/Browse/ByImage/?specimenId=#{imageSwitcher.mbid}"   
                                            target="_blank"   icon="ui-icon-extlink"/>    
                                <p:menuitem value="Naturforskaren" url="http://naturforskaren.se/search/#{imageSwitcher.scientificName}"    
                                            target="_blank"   icon="ui-icon-extlink"/>   
                                <p:menuitem value="GIBF.se" url="http://old.gbif.se/search/#{imageSwitcher.scientificName}"    
                                            target="_blank"   icon="ui-icon-extlink"/>  
                                <p:menuitem value="GIBF" url="http://data.gbif.org/search/#{imageSwitcher.scientificName}"    
                                            target="_blank"   icon="ui-icon-extlink"/>  
                                <p:menuitem value="#{msg.btnclose}" url="javascript:void(0)" onclick="PF('imgswitchdlg').hide();" icon="ui-icon-close"/>    
                            </p:contextMenu> 
                        </p:panel>

                    </p:dialog>






                    <!-- search panel -->
                    <h:panelGrid id="searchPanel"  cellpadding="0" cellspacing="0"  >   
                        
                        
                         
                         
                        <!-- simple search -->
                        <h:panelGrid cellpadding="0" cellspacing="0" styleClass="simplesearchpanel" id="simpleSearchPanel" rendered="#{search.hideadvance}"   >    
                            <h:panelGrid columns="3">
                                <p:spacer width="150" height="15" />  
                                <p:spacer width="150" height="15" />   
                                <p:spacer width="150" height="15" />     
                                
                                <p:spacer width="150" height="5" />  
                                <h:inputText id="inputbox" value="#{search.input}"  
                                             size="70" onfocus="if (this.value === '#{search.defaultSearchText}') {this.value = ''; }" >  
                                    <f:ajax event="blur" render="simpleSearchPanel" listener="#{search.blur}" /> 
                                    <f:ajax event="keyup" render="#{search.updateResult}" listener="#{search.fullTextSearch}"  />   
                                </h:inputText>    
                                <p:spacer width="150" height="5" /> 
                                
                                <p:spacer width="150" height="5" /> 
                                <h:panelGroup styleClass="searchBoxPanelSimple"  rendered="#{search.hideadvance}" layout="block"   >   
                                    <h:commandLink action="#{search.openAdvanceSearch}"  value="#{msg.advancesearch}"  >    
                                        <f:ajax render="searchPanel welcomepagepanel" />
                                    </h:commandLink> 
                                </h:panelGroup>    
                                <p:spacer width="150" height="5" />   
                            </h:panelGrid>  
                        </h:panelGrid> 
                        
                        <!-- advance search --> 
                        <h:panelGrid  id="advanceSearchPanel" styleClass="advancesearchpanel" rendered="#{!search.hideadvance}"  > 
                            <h:panelGrid id="advanceheaderPanel" columns="2"  >
                                <p:spacer width="10" height="10"  />
                                <h:panelGrid style="width: 900px; " columns="4">
                                    <h:outputText value="#{msg.advancesearch}" style="font-size: 16px; font-weight: bold;" />

                                    <p:commandLink rendered="#{search.expandsAdvance}" 
                                                   actionListener="#{search.hideadavancesearch}" update="searchPanel">
                                        <p:graphicImage value="/resources/images/icons/downarrow.gif" styleClass="images" /> 
                                    </p:commandLink>


                                    <p:commandLink rendered="#{!search.expandsAdvance}"  
                                                   actionListener="#{search.expandadavancesearch}" update="searchPanel">
                                        <p:graphicImage value="/resources/images/icons/hidearrow.gif" styleClass="images"  /> 
                                    </p:commandLink>

                                    <p:spacer width="450" height="10"  /> 
                                    <h:panelGrid styleClass="searchBoxPanelSimple"   > 
                                        <h:commandLink action="#{search.closeadvancesearch}"  value="#{msg.closeadvancesearch}"  >    
                                            <f:ajax render="searchPanel" />
                                        </h:commandLink>  
                                    </h:panelGrid> 
                                </h:panelGrid>  
                            </h:panelGrid>
                            <h:panelGrid id="querybuildpanel" >
                                <h:panelGrid columns="2" rendered="#{search.expandsAdvance}" >


                                    <p:spacer width="10" height="10"  />
                                    <ui:repeat var="querybean" value="#{search.queryBeans}" varStatus="status" >

                                        <h:panelGrid columns="5" columnClasses="alignBottom,alignBottom,alignBottom,alignBottom,alignBottom,alignBottom" > 
                                            <h:panelGrid columns="3" >
                                                <p:spacer width="1" height="15"   rendered="#{querybean.field == 'season'}" />
                                                <p:spacer width="1" height="15"   rendered="#{querybean.field == 'season'}" /> 
                                                <p:spacer width="70" height="15"   rendered="#{querybean.field == 'season'}" /> 
                                                
                                                <p:spacer width="70" height="15"   rendered="#{status.first}"/>
                                                <h:selectOneMenu value="#{querybean.operattion}"  
                                                                 style="width:70px; margin-top: 4px;"  rendered="#{!status.first}" > 
                                                    <f:selectItem itemValue="and" itemLabel="#{msg.and1}" />
                                                    <f:selectItem itemValue="or" itemLabel="#{msg.or1}" /> 
                                                    <f:selectItem itemValue="not" itemLabel="#{msg.not1}" /> 
                                                    <f:ajax event="change" render=":searchform:querybuildpanel" listener="#{search.operationchange(querybean, status.index)}" />  
                                                </h:selectOneMenu> 
                                                 
                                                <h:selectOneMenu value="#{querybean.content}"  
                                                                 style="width:100px; margin-top: 4px;"   > 
                                                    <f:selectItem itemValue="contains" itemLabel="#{msg.contains}" />
                                                    <f:selectItem itemValue="startswith" itemLabel="#{msg.startswith}" /> 
                                                    <f:selectItem itemValue="exact" itemLabel="#{msg.exact}" />   
                                                     <f:ajax event="change" render=":searchform:querybuildpanel" listener="#{search.operationchange(querybean, status.index)}" />  
                                             
                                                </h:selectOneMenu> 
                                                
                                                <h:selectOneMenu value="#{querybean.field}" style="width:170px; margin-top: 4px; " > 
                                                    <f:selectItem itemValue="text" itemLabel="#{msg.allfields}" />
                                                    <f:selectItem itemValue="ftx" itemLabel="#{msg.scientificname}" /> 
                                                    <f:selectItem itemValue="eftx" itemLabel="#{msg.exactsearch}" /> 
                                                    <f:selectItem itemValue="cm" itemLabel="#{msg.swedishname}" /> 
                                                    <f:selectItem itemValue="auth" itemLabel="#{msg.author}" /> 
                                                    <f:selectItem itemValue="cn"  itemLabel="#{msg.cataloguenumber}" />  
                                                    <f:selectItem itemValue="lc" itemLabel="#{msg.locality} / #{msg.geography}" />
                                                    <f:selectItem itemValue="sfn"  itemLabel="#{msg.stationfieldnumber}" />   
                                                    <f:selectItem itemValue="col"   itemLabel="#{msg.collector}" />  
                                                    <f:selectItem itemValue="dn"  itemLabel="#{msg.determiner}" />  
                                                    <f:selectItem itemValue="asn"   itemLabel="#{msg.accession}" />
                                                    <f:selectItem itemValue="date"  itemLabel="#{msg.collectbetween}" />   
                                                    <f:selectItem itemValue="season"  itemLabel="#{msg.partofseason}" /> 
                                                    <f:ajax event="change" render=":searchform:querybuildpanel" listener="#{search.operationchange(querybean, status.index)}" />  
                                                </h:selectOneMenu> 
                                            </h:panelGrid>
                                            

                                            <h:panelGrid rendered="#{querybean.field != 'date' }"  cellpadding="0" cellspacing="0">
                                                <h:panelGrid rendered="#{querybean.field != 'season' }"  cellpadding="0" cellspacing="0">
                                                    <p:autoComplete value="#{querybean.value}"  id="autoComplete"
                                                                    size="65" required="false"
                                                                    forceSelection="false" 
                                                                    completeMethod="#{search.querycomplete(querybean)}"  
                                                                    scrollHeight="300" minQueryLength="2"  >


                                                        <p:ajax event="itemSelect" listener="#{search.itemSelect}" update=":searchform:querybuildpanel"    />  
                                                        <f:ajax event="keyup" listener="#{search.keyup}" render =":searchform:querytext"  />  

                                                    </p:autoComplete> 
                                                </h:panelGrid>
                                            </h:panelGrid>

                                            <h:panelGrid rendered="#{querybean.field == 'date'}"  cellpadding="0" cellspacing="0">


                                                <h:panelGrid columns="5"  cellpadding="0" cellspacing="0" > 

                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="fromdatepanel">
                                                        <p:calendar id="fromdate" pattern="yyyy-MM-dd"  yearRange="1800:2100" maxdate="#{search.maxDate}"
                                                                    showButtonPanel="true" size="26" value="#{querybean.fromDate}" 
                                                                    navigator="true" > 
                                                            <p:ajax event="dateSelect" listener="#{search.handleDateSelect}" update=":searchform:querybuildpanel" />   
                                                        </p:calendar> 
                                                    </h:panelGrid>

                                                    <p:spacer width="16" height="10" /> --
                                                    <p:spacer width="16" height="10" />

                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="todatepanel">
                                                        <p:calendar pattern="yyyy-MM-dd" yearRange="1800:2100" maxdate="#{search.maxDate}"
                                                                    showButtonPanel="true" navigator="true"  id="todate"
                                                                    size="26" value="#{querybean.toDate}"  >
                                                            <p:ajax event="dateSelect" listener="#{search.handleDateSelect}" update=":searchform:querybuildpanel" />   
                                                        </p:calendar>  
                                                    </h:panelGrid> 
                                                </h:panelGrid>
                                            </h:panelGrid>

                                            <h:panelGrid rendered="#{querybean.field == 'season'}"  cellpadding="0" cellspacing="0" >

                                                <h:panelGrid  columnClasses="valueColumn"    > 
                                                    <h:panelGrid columns="5"  cellpadding="0" cellspacing="0">  
                                                        <h:panelGrid columns="7" cellpadding="0" cellspacing="0"> 
                                                            <h:outputLabel value="#{msg.frommonth}" />
                                                            <p:spacer width="60" height="10" />
                                                            <h:outputLabel value="#{msg.day}" />
                                                            <p:spacer width="60" height="10" />
                                                            <h:outputLabel value="#{msg.tomonth}" />  
                                                            <p:spacer width="70" height="10" />
                                                            <h:outputLabel value="#{msg.day}" />
                                                        </h:panelGrid>
                                                    </h:panelGrid>
                                                </h:panelGrid>

                                                <h:panelGrid  columnClasses="valueColumn" id="seasonpanel"    >

                                                    <h:panelGrid columns="9"  cellpadding="0" cellspacing="0" id="seasonSearch">   
                                                        <h:selectOneMenu value="#{querybean.startMonth}" id="startmonth" style="width: 120px;" > 
                                                            <f:selectItems value="#{search.monthList}" /> 
                                                            <f:ajax event="change" render="startday :searchform:querybuildpanel"  listener="#{search.changeStartMonth}" /> 
                                                        </h:selectOneMenu> 

                                                        <p:spacer width="8" height="10" />  
                                                        <h:selectOneMenu value="#{querybean.startDay}" id="startday" style="width: 60px;" > 
                                                            <f:selectItems value="#{search.startDayList}" /> 
                                                            <f:ajax event="change" render=":searchform:querybuildpanel"  listener="#{search.changeStartDay}" />  
                                                        </h:selectOneMenu>
                                                        <p:spacer width="25" height="10" />  
                                                        <h:selectOneMenu value="#{querybean.endMonth}" id="endmonth" style="width: 120px;">
                                                            <f:selectItems value="#{search.monthList}" />
                                                            <f:ajax event="change" render="endday :searchform:querybuildpanel" listener="#{search.changeEndMonth}" /> 
                                                        </h:selectOneMenu>
                                                        <p:spacer width="8" height="10" />
                                                        <h:selectOneMenu value="#{querybean.endDay}" id="endday" style="width: 60px;" > 
                                                            <f:selectItems value="#{search.endDayList}" />  
                                                            <f:ajax event="change" render=":searchform:querybuildpanel" listener="#{search.changeEndDay}" /> 
                                                        </h:selectOneMenu>  
                                                    </h:panelGrid> 
                                                </h:panelGrid>  
                                            </h:panelGrid> 

                                            <h:panelGrid columns="2">
                                                <p:spacer width="5" height="15"   rendered="#{querybean.field == 'season'}" />
                                                <p:spacer width="5" height="15"   rendered="#{querybean.field == 'season'}" />
                                                
                                                <h:commandLink action="#{search.removequeryline(querybean, status.index)}" rendered="#{search.queryBeans.size() > 1}"  > 
                                                    <h:graphicImage library="images" name="icons/RemoveRecord16x16.png" 
                                                                    alt="#{msg.removequery}" title="#{msg.removequery}" styleClass="images" />
                                                    <f:ajax render=":searchform:searchPanel :searchform:dinaheader :searchform:result"/>
                                                </h:commandLink> 
                                                <h:commandLink action="#{search.addqueryline(querybean, status.index)}" rendered="#{status.last}" > 
                                                    <h:graphicImage library="images" name="icons/AddNewRecord16x16.png" 
                                                                    alt="#{msg.addquery}" title="#{msg.addquery}" styleClass="queryImages" />
                                                    <f:ajax render=":searchform:searchPanel :searchform:dinaheader"/>
                                                </h:commandLink>  
                                            </h:panelGrid> 
                                        </h:panelGrid>
                                    </ui:repeat>  

                                    <p:spacer width="10" height="10"  />
                                    <h:outputText value="#{msg.searchquery}"    /> 
                                    <p:spacer width="10" height="10"  />

                                    <h:inputTextarea value="#{search.querytext}"  cols="125" rows="1" 
                                                     id="querytext" readonly="true" disabled="true" />

                                    <p:spacer width="10" height="10"  />
                                    <h:panelGroup style="float: right; width: 180px;" layout="block" >
                                        <p:commandButton id="advSearch" value="#{msg.searchbutton}" 
                                                         action="#{search.advanceSearch}"  
                                                         update=":searchform:result welcomepagepanel"
                                                         />    
                                        <p:spacer width="20" height="10"  />
                                        <p:commandButton id="advSearchClear" value="#{msg.clearbutton}" 
                                                         action="#{search.advanceClear}"  
                                                         update=":searchform:result welcomepagepanel :searchform:searchPanel"
                                                         />    
                                    </h:panelGroup>  
                                </h:panelGrid>  
                            </h:panelGrid>  
                        </h:panelGrid> 
                        
                    </h:panelGrid>
                    

                    

                    <!-- welcome page --> 
                    <h:panelGrid id="welcomepagepanel"> 
                        <h:panelGrid styleClass="searchBoxPanelSimple"  rendered="#{search.welcomePage}" > 
                            <h:panelGrid  cellpadding="0" cellspacing="0"   
                                          rendered="#{search.searchStart}" styleClass="searchBoxPanelSimple"  > 
                                <p:commandLink action="#{search.backtoresult}" 
                                               value="#{msg.backtoresult}" process="@this" global="false"
                                               update=":searchform:result welcomepagepanel :searchform:searchPanel" /> 
                            </h:panelGrid>
                        </h:panelGrid>  
                        
                        <h:panelGrid rendered="#{search.welcomePage}" cellpadding="0" cellspacing="0"  styleClass="welcomepagepanel"> 
                             
                            <!-- welcome content --> 
                            <h:panelGrid  columns="3" id="welcomepanel" columnClasses="searchColumn,emptyColumn,statisticColumn" 
                                          cellpadding="0" cellspacing="0"  rendered="#{search.welcomeContent == 0}">  
                                    
                                <h:panelGrid>
                                    <h:panelGrid columns="2" id="welcome" >
                                        <p:spacer width="20" />
                                        <h:panelGrid  styleClass="welcome">
                                            <h:panelGrid>
                                                <h:outputText value="#{msg.welcome1}"  styleClass="welcomeheader" /> 
                                                <h:outputText value="#{msg.welcome2}"   styleClass="welcomeheader" /> 
                                            </h:panelGrid> 
                                        </h:panelGrid>
                                        <p:spacer width="20" height="5" />
                                        <p:spacer width="20" height="5" />

                                        <p:spacer width="20" />
                                        <h:panelGrid columns="3" columnClasses="alignTop,alignTop,alignTop">
                                            <h:panelGrid > 
                                                <p:cache region="3baggcache" key="3baggimg">
                                                    <h:graphicImage library="images" name="3bagg_rising.png" alt="3bagg" 
                                                        title="3bagg" styleClass="images"  width="350" height="292"  />
                                                    <br />
                                                    <h:outputText value="#{msg.photo3bagg}" style="float: left;  font-size: 9px; "  />  
                                                </p:cache> 
                                            </h:panelGrid> 
                                            <p:spacer width="30" />
                                            <h:panelGrid style="margin-top: 30px;" > 
                                                <h:outputText value="#{msg.welcomedescription}" /> 
                                                
                                                <p:spacer width="20" height="5" />
                                                <h:panelGrid id="readmorepanel" styleClass="readmorepanel" >  
                                                    <p:commandLink actionListener="#{search.changeTab(4)}" value="#{msg.readmore}" styleClass="#{styleBean.tabAbout}" 
                                                                   process="@this" global="false"  update="@all"  /> 
                                                </h:panelGrid>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                          
                                        <p:spacer width="20" height="20" />
                                        <p:spacer width="20" height="20" />
                                        
                                        
                                        <p:spacer width="20" />
                                        
                                        <p:outputPanel deferred="true" deferredMode="visible" autoUpdate="true" layout="block"  >   
                                            <h:panelGrid style="width: 500px; margin-left: auto;  margin-right:  auto;    "  >
                                                <p:chart type="bar" id="monthChart"  model="#{chart.totalMonthModel}" 
                                                        style="height:300px; width: 550px;  "   >   
                                                </p:chart>  

                                                <p:spacer width="20" /> 

                                                <p:spacer width="20" />
                                                <p:chart type="bar" id="yearChart" model="#{chart.totalTenYearsModel}"   
                                                         style="height:300px; width: 550px; padding-left: 50px;"    >   
                                                </p:chart> 
                                            </h:panelGrid> 
                                        </p:outputPanel>
                                    </h:panelGrid>  
                                </h:panelGrid>
                                 
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                <p:spacer width="10" height="20" />
                                <h:panelGrid id="shoutcutpanel" styleClass="shoutcutpanel">
                                    <p:spacer width="20" height="20" /> 
                                    <p:spacer width="20" height="20" />
                                    <p:spacer width="20" height="20" />

                                    <h:outputText value="#{msg.commonsearch}" style="font-weight: bold;" /> 
                                    <h:commandLink action="#{search.alldata}"  >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.alldata}" />  
                                            <h:outputText value="#{statistic.defaultStatisticData.total}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel"/>
                                    </h:commandLink> 

                                    <h:commandLink action="#{search.searchwithmap}"  >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datawithmap}" />  
                                            <h:outputText value="#{statistic.defaultTotalWithMap}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel querypanel"/>
                                    </h:commandLink> 

                                    <h:commandLink action="#{search.searchinsweden}"   >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datainsweden}" />  
                                            <h:outputText value="#{statistic.defaultTotalInSweden}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel querypanel"/>
                                    </h:commandLink> 

                                    <h:commandLink action="#{search.searchdna}"   >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datawithdnasequence}" />  
                                            <h:outputText value="#{statistic.defaultTotalDNA}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel querypanel"/>
                                    </h:commandLink> 
                                    
                                    <h:commandLink action="#{search.searchwithimages}"   >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.specimenswithimage}" />  
                                            <h:outputText value="#{statistic.defaultTotalWithImage}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel querypanel"/>
                                    </h:commandLink> 
                                    

                                    <h:commandLink action="#{search.searchwithtype}"   >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.typeddata}" />  
                                            <h:outputText value="#{statistic.defaultTotalType}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result welcomepagepanel querypanel"/>
                                    </h:commandLink> 

                                    <p:spacer width="20" height="20" />
                                    <p:spacer width="20" height="20" />

                                    <h:outputText value="#{msg.allitemsincollections}" style="font-weight: bold;" /> 
                                    <ui:repeat var="collection" value="#{statistic.defaultStatisticData.collections}" varStatus="collectionStatus" >   
                                        <h:commandLink action="#{search.searchCollection(collection)}"   
                                                       title="#{collection.name}"  >   
                                            <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                                <h:outputText value="#{collection.shortName}" />  
                                                <h:outputText value="#{collection.total}" />
                                            </h:panelGrid> 
                                            <f:ajax render=":searchform:result :searchform:welcomepagepanel"/>
                                        </h:commandLink>  
                                    </ui:repeat>  

                                    <p:spacer width="20" height="20" />
                                    <p:spacer width="20" height="20" />

                                    <h:outputText value="#{msg.institution}" style="font-weight: bold;"/>
                                    <ui:repeat var="institutiondata" value="#{statistic.defaultStatisticData.institutionDataList}" varStatus="collectionStatus" >   
                                        <h:commandLink action="#{search.institutiondata(institutiondata)}"   
                                                       title="#{institution.institution}"  >   
                                            <h:panelGrid id="institutionpanel" columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                                <h:outputText value="#{institutiondata.institution}" />  
                                                <h:outputText value="#{institutiondata.numOfRecords}" />
                                            </h:panelGrid> 
                                            <f:ajax render=":searchform:result :searchform:welcomepagepanel"/>
                                        </h:commandLink>  
                                    </ui:repeat>  

                                    <p:spacer width="20" height="20" />
                                    <p:spacer width="20" height="20" />

                                    <h:outputText value="#{msg.externallink}" style="font-weight: bold;"  /> 
                                    <h:outputLink id="dinaspecieslink" value="http://naturforskaren.se/"  
                                                  title="scientificname"  target="_blank" >  
                                        <h:outputText value="#{msg.naturforskaren}"   />   
                                    </h:outputLink>  
                                    <h:outputText value="#{msg.naturforskarendesc}" style="font-size: 10px;" /> 
 
                                    <h:outputLink value="http://www.gbif.se/" target="_blank" > 
                                        <h:outputText value="#{msg.gibf}" /> 
                                    </h:outputLink> 
                                    <h:outputText value="#{msg.gibfdesc}" style="font-size: 10px;" /> 

                                </h:panelGrid>
  
                            </h:panelGrid>

                            <h:panelGrid id="collectionListPanel" rendered="#{search.welcomeContent == 1}" >
                                <p:accordionPanel value="#{statistic.collections}" activeIndex="-1"
                                                  var="collection" styleClass="accordingpanel" 
                                                  dynamic="true"  cache="true"  >  


                                    <p:tab title="#{collection.name}">   

                                        <p:chart id="collectionMonthChart"  type="bar" 
                                                 model="#{chart.createMonChartForCollection(collection.code)}"   
                                                    style="height:300px; width: 550px;"  >   
                                        </p:chart>   
                                        <p:spacer width="20" height="20" /> 
                                        <p:chart   type="bar" model="#{chart.createTenYearsChartForCollection(collection.code)}" 
                                                   style="height:300px; width: 550px;"  >  
                                        </p:chart>  

                                    </p:tab>  

                                </p:accordionPanel>   

                            </h:panelGrid> 
 
                                
                            
                            <h:panelGroup layout="block" id="partnersPanel" rendered="#{search.welcomeContent == 2}">
                            
                                <p:spacer width="20" height="20" />
                                
                                
                                <h:outputLink value="#{msg.nrmurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="nrm_logo_farg_html.gif" alt="#{msg.nrm}" 
                                                    title="#{msg.nrm}" styleClass="images" />
                                </h:outputLink>
                                
                                <p:spacer width="20" height="20" />
                                <h:outputLink value="#{msg.sluurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="slu-logo-rgb-web-medium.jpg" alt="#{msg.slu}" 
                                                    title="#{msg.slu}" styleClass="images" />
                                </h:outputLink> 
                                
                                <p:spacer width="20" height="20" />
                                <h:outputLink value="#{msg.lifewatchurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="Svenska-Lifewatch-4.png" alt="#{msg.lifewatch}" 
                                                    title="#{msg.lifewatch}" styleClass="images" />
                                </h:outputLink> 
                                 
                                
                                
                                
                                <p:spacer width="20" height="20" />
                                <h:outputLink value="#{msg.gnmurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="gnm_logo.jpg" alt="#{msg.gnm}" 
                                                    title="#{msg.gnm}" styleClass="images" />
                                </h:outputLink>
                                
                                <p:spacer width="20" height="20" />
                                <h:outputLink value="#{msg.lundsuniversityurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="Logotyp_Lunds_universitet_(vit).png" alt="#{msg.lunduniversitory}" 
                                                    title="#{msg.lunduniversitory}" styleClass="images" />
                                </h:outputLink>


                                <p:spacer width="20" height="20" />
                                <h:outputLink value="#{msg.umeauniversitoryurl}"  target="_blank" > 
                                    <h:graphicImage library="images" name="87223_23210_umu_pos.jpg" alt="#{msg.umeauniversitory}" 
                                                    title="#{msg.umeauniversitory}" styleClass="images" />
                                </h:outputLink>


                                <p:spacer width="20" height="20" /> 
                                <h:outputLink value="#{msg.smtpurl}"  target="_blank"  > 
                                    <h:graphicImage library="images" name="StationLinne_logo.jpg" alt="#{msg.smtp}" 
                                                    title="#{msg.smtp}" styleClass="imagesbottomepadding"  />
                                </h:outputLink>  



                                <p:spacer width="20" height="20" />


                            </h:panelGroup> 
                    

                  


                            

                            <h:panelGrid id="fqaPanel" rendered="#{search.welcomeContent == 3}">
                                <h:panelGrid style="margin-left: 20px; margin-right: 200px;" >
                                    <h:panelGrid id="svVersionFQA" rendered="#{languages.swedish}">
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Vanliga frågor och svar</h:outputLabel>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Vad är Naturarv?</h:outputLabel>
                                        <h:column />
                                        <p>
                                            Naturarv är en webbplats där du kan söka efter information om föremål i flera av Sveriges  naturhistoriska samlingar. 
                                            Här hittar du information om biologiska och geologiska föremål från olika delar av världen.
                                        </p>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Vem står bakom Naturarv?</h:outputLabel>
                                        <h:column />
                                        <h:panelGroup>
                                            Merparten av innehållet som publiceras på Naturarv tillhandahålls av svenska offentliga institutioner. Under 
                                            <h:commandLink action="#{search.listPartners()}"  title="#{msg.partners}" style="text-decoration: underline;" >    
                                                    <h:outputText value="#{msg.partners}" />    
                                                    <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink>  
                                            kan du läsa om vilka som bidrar med innehåll. För utveckling och underhåll av själva webbplatsen svarar Naturhistoriska riksmuseet i Stockholm. 
                                            Hör gärna av dig med frågor eller synpunkter. Kontaktuppgifter hittar du under 
                                            <h:commandLink action="#{search.contactus}"  style="text-decoration: underline;"  >  
                                                <h:outputText value="#{msg.contactus}" />   
                                                <f:ajax render=":searchform:result welcomepagepanel" /> 
                                            </h:commandLink>. 
                                        </h:panelGroup> 
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Vilken slags information finns på Naturarv?</h:outputLabel>
                                        <h:column />
                                        <p>
                                            Naturarv presenterar information från naturhistoriska samlingar av olika slag (fossila växter och djur, vävnads- och DNA-prover, med mera). 
                                            Några samlingar saknar direkt koppling till fysiska föremål. Sådana icke-fysiska samlingar används framförallt till att hantera observationsdata, 
                                            exempelvis uppgifter som samlats in i samband med en inventering.
                                        </p>

                                        <h:column />
                                        <p>
                                            På Naturarv publiceras bara en del av innehållet i den nationella samlingsdatabasen. Vilka informationskategorier som visas styrs dels av 
                                            önskemål från användare, dels av vad som är tekniskt möjligt, 
                                            och dels av vad lagen tillåter (till exempel publicerar vi inte vissa personuppgifter). För närvarande finns exempelvis 
                                            information som rör insamlingstillfället och föremålets klassificering.
                                        </p>

                                        <h:column />
                                        <p>
                                            Hur information hanteras kan ibland skilja sig mellan samlingar. Till exempel kan och samma geografiska plats anges på olika sätt eller läggas 
                                            in på olika ställen i den nationella samlingsdatabasen. Eftersom Naturarv inte visar allt innehåll behöver avsaknad av en uppgift inte 
                                            nödvändigtvis innebära att informationen saknas i samlingsdatabasen.
                                        </p>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Varifrån kommer informationen på Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <h:panelGroup>
                                            Informationen på Naturarv hämtas från den nationella samlingsdatabasen. Varje institution ansvarar själv för data som rör de egna samlingarna. Under 
                                            <h:commandLink action="#{search.listPartners()}"  title="#{msg.partners}" style="text-decoration: underline;" >    
                                                    <h:outputText value="#{msg.partners}" />    
                                                    <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink> 
                                            kan du se alla institutioner som finns på Naturarv samt vilka samlingar de ansvarar för.
                                        </h:panelGroup> 

                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Kan jag lita på uppgifterna på Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <p>
                                            Målet är att alla uppgifter som publiceras på Naturarv ska vara informativa, korrekta och aktuella. Eftersom vi inte har möjlighet att 
                                            kontrollera varje uppgift så kan felaktigheter ibland förekomma. Naturarv uppdateras varje dygn med den senaste informationen från 
                                            den nationella samlingsdatabasen.
                                        </p> 
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Hur ofta uppdateras informationen på Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <p>
                                            Den senaste informationen hämtas en gång per dygn från den nationella samlingsdatabasen. Uppdateringen sker vanligtvis på natten, svensk tid.
                                        </p>  
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Hur kommer jag i kontakt med människorna bakom Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <h:panelGroup>
                                            Våra kontaktuppgifter hittar du under 
                                            <h:commandLink action="#{search.contactus}"  style="text-decoration: underline;"  >  
                                                <h:outputText value="#{msg.contactus}"  />   
                                                <f:ajax render=":searchform:result welcomepagepanel" /> 
                                            </h:commandLink>. 
                                        </h:panelGroup> 

                                    </h:panelGrid> 

                                    <h:panelGrid id="enVersionFQA" rendered="#{!languages.swedish}">
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Frequently asked questions</h:outputLabel>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >What is Naturarv?</h:outputLabel>
                                        <h:column />
                                        <p>
                                            Naturarv is a website where you can search databases for information on biological and geological specimens from many geographic regions 
                                            that are housed at several of Sweden's natural history collections.
                                        </p>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Who is responsible for Naturarv?</h:outputLabel>
                                        <h:column />
                                        <h:panelGroup>
                                            The majority of Naturarv content published here is provided by Swedish public institutions. Under   
                                            <h:commandLink action="#{search.listPartners()}"  title="#{msg.partners}" style="text-decoration: underline;" >    
                                                    <h:outputText value="#{msg.partners}" />    
                                                    <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink>, 
                                            one can read about the institutions that have contributed data to the Naturarv. 
                                            The Swedish Museum of Natural History, Stockholm is responsible for website development and maintenance. 
                                            Your questions and feedback on the site are welcomed; contact details are found under 
                                            <h:commandLink action="#{search.contactus}"  style="text-decoration: underline;"  >  
                                                <h:outputText value="#{msg.contactus}" />   
                                                <f:ajax render=":searchform:result welcomepagepanel" /> 
                                            </h:commandLink>.  
                                        </h:panelGroup> 
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        
                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >What kinds of information are found in Naturarv?</h:outputLabel>
                                        <h:column />
                                        <p>
                                            Naturarv presents information from a wide range of natural history collection objects (incl. fossil plants and animals, tissue and DNA samples). 
                                            Several Naturarv records are indirectly linked to physical objects housed at Swedish collections. 
                                            These records are organized in Naturarv collections to manage data relevant for collections management and research, for example, 
                                            information compiled as results from an inventory.
                                        </p>

                                        <h:column />
                                        <p>
                                            Only a proportion of the total collections are represented by records published in Naturarv. Which information categories that are shown is steered 
                                            based on the wishes of users, some of which are technically possible, and some based on legal restrictions (for example, we do not publish personal information). 
                                            For the time being, there is for example information on collecting events and taxonomic classification of specimens.
                                        </p>

                                        <h:column />
                                        <p>
                                            How information is handled may differ among collections. For example, a single geographic locality can have alternative characterizions 
                                            (e.g., represented by several names or with different coordinate precision or accuracy) or be listed under different political regions in national databases. 
                                            Naturarv does not show all original record content so the lack of expected search results does not necessarily indicate whether information is 
                                            missing in source collection databases.
                                        </p>
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >What is the source of information in Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <h:panelGroup>
                                            Information in Naturarv is compiled from the national collections database. Each institution is responsible for data from its own collections. Under 
                                            <h:commandLink action="#{search.listPartners()}"  title="#{msg.partners}" style="text-decoration: underline;" >    
                                                    <h:outputText value="#{msg.partners}" />    
                                                    <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink>, 
                                            one can find a list of institutions represented in Naturarv and the collections for which they are responsible. 
                                        </h:panelGroup> 

                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >Can I trust data from Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <p>
                                            The objective is to provide data via Naturarv that is informative, correct and up-to-date. Because we do not have the possibility to validate the accuracy 
                                            of the compiled records, the user should be aware that incorrect data may be obtained from Naturarv search results. Naturarv is updated, however, 
                                            every day with the latest information from the national collections database. 
                                        </p> 
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >How often is the information updated in Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <p>
                                            The latest information is imported once daily from the national collections database. Updates are usually performed at night, Swedish time.
                                        </p>  
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />

                                        <h:outputLabel style="font-size: 16px;  font-weight: bold; font-style: italic" >How do I get in contact with the people responsible for Naturarv?</h:outputLabel>
                                        <h:column /> 
                                        <h:panelGroup>
                                            Our contact information is found under
                                            <h:commandLink action="#{search.contactus}"  style="text-decoration: underline;"  >  
                                                <h:outputText value="#{msg.contactus}"  />   
                                                <f:ajax render=":searchform:result welcomepagepanel" /> 
                                            </h:commandLink>. 
                                        </h:panelGroup>  
                                    </h:panelGrid> 
                                </h:panelGrid>
                            </h:panelGrid> 



                            <h:panelGrid id="contactTextPanel" rendered="#{search.welcomeContent == 5}">
                                <h:panelGrid style="width: 600px; margin-left: 50px; margin-right: 50px; " >
                                    <p:spacer width="20" height="20" /> 
                                    <h:outputText value="#{msg.contactus}" style="font-size: 28px; font-weight: bold; " />  
                                    <p:spacer width="20" height="20" />  
                                    <h:outputText value="#{msg.contacttext}"   />
                                    <p:spacer width="20" height="20" />  
                                    <h:outputText value="#{msg.postaddresstitle}" style="font-size: 20px; font-weight: bold; "  /> 
                                    <p:spacer width="20" height="20" />  
                                    <h:outputText value="#{msg.postaddress}"   />   
                                    <h:outputText value="#{msg.box}"   />  
                                    <h:outputText value="#{msg.post}"   /> 

                                    <p:spacer width="20" height="20" /> 
                                    <h:panelGrid columns="2">
                                        <h:outputText value="#{msg.telephone}" style="font-size: 16px; font-weight: bold; padding-right: 5px;" />  
                                        <h:outputText value="#{msg.phonenumber}"   /> 
                                        
                                        <h:outputText value="#{msg.epost}" style="font-size: 16px; font-weight: bold; padding-right: 5px;" />  
                                        <h:outputLink value="mailto:#{msg.emailaddress}">#{msg.emailaddress}</h:outputLink>
                                    </h:panelGrid> 
 
                                    
                                </h:panelGrid> 
                            </h:panelGrid>

                            <h:panelGrid id="aboutPanel" rendered="#{search.welcomeContent == 4}">
                                <h:panelGrid style="margin-left: 20px; margin-right: 200px;" >
                                    <h:panelGrid id="svVersion" rendered="#{languages.swedish}">
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Vad är Naturarv?</h:outputLabel>
                                        <h:column />

                                        <p style="font-size: 16px;">
                                            På Naturarv kan du söka information om föremål i flera av Sveriges naturhistoriska samlingar. Webbplatsen har tillkommit genom ett nationellt samarbete kring digital samlingshantering. 
                                            Syftet är att tillhandahålla information av hög kvalitet och därigenom bidra till ökad kunskap om de naturhistoriska samlingarna. 
                                        </p>
                                        <h:column />
                                       
                                        <h:panelGroup>
                                            Naturarv vänder sig i första hand till forskare och personal vid museer, men är också tänkt att kunna vara ett viktigt redskap för exempelvis naturvårdare, 
                                            amatörbiologer och beslutsfattare. Webbplatsen drivs från Naturhistoriska riksmuseet i Stockholm och utvecklas i dialog med användare vid museer runt om i landet. 
                                            Det sökbara innehållet utökas kontinuerligt allteftersom föremål nyregistreras och nya samlingar läggs till. Under 
                                            <h:commandLink action="#{search.listCollections}"   
                                                           title="#{msg.ourcollections}" style="text-decoration: underline;" >    
                                                <h:outputText value="#{msg.ourcollections}" />    
                                                <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink> 
                                             kan du läsa mer om de sökbara samlingarna.
                                        </h:panelGroup>
                                             

                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Del av en nationell infrastruktur</h:outputLabel>

                                        <h:column /> 
                                       
                                        <h:panelGroup>
                                            Arbetet med att bygga upp en digital infrastruktur för Sveriges naturhistoriska samlingar tog fart på allvar under 2006 i och med starten av det så kallade DINA-projektet 
                                            (DINA står för digitalt informationssystem för naturhistoriska samlingar). Projektet involverade till en början endast ett fåtal svenska aktörer 
                                            (Naturhistoriska riksmuseet i Stockholm, Evolutionsmuseet i Uppsala, Göteborgs naturhistoriska museum, Herbarium Göteborg samt Biologiska museerna i Lund), 
                                            men utgörs numera av av något som kan liknas vid ett internationellt konsortium. För svenskt vidkommande kvarstår dock målet att skapa en gemensam plattform för 
                                            landets naturhistoriska data. Mer om DINA finns att läsa på projektets egen webbplats,   
                                            <h:outputLink value="#{msg.dinaurl}" target="_blank" style="text-decoration: underline;" > 
                                                <h:outputText value="dina-project.se" /> 
                                            </h:outputLink>.
                                        </h:panelGroup>
                                            
                                         

                                        <h:column /> 
                                        <h:panelGroup>
                                            Förhoppningen är att Naturarv så småningom ska innehålla information från alla svenska institutioner som är delaktiga i DINA-projektet. 
                                            Sökportalen är därför en central del av den nationella infrastrukturen. Under 
                                            <h:commandLink action="#{search.listPartners()}"   
                                                           title="#{msg.partners}" style="text-decoration: underline;" >    
                                                <h:outputText value="#{msg.partners}" />    
                                                <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink> 
                                            kan du se vilka institutioner som idag bidrar med information till Naturarv.
                                        </h:panelGroup>
 
                                        
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Internationellt samarbete kring utvecklingen</h:outputLabel>

                                        <h:column /> 
                                        <h:panelGroup>
                                            Den tekniska utvecklingen av komponenterna bakom Naturarv sker inom ramen för DINA-projektet i nära samarbete med utvecklare i bland annat övriga Norden, 
                                            Estland, USA och Kanada. För all programvara som produceras gäller principen om öppen källkod. En stor del av utvecklingen sker inom och kring programvaran Specify 
                                            (läs mer om programmet på 
                                            <h:outputLink value="#{msg.specifyurl}" target="_blank" style="text-decoration: underline;" > 
                                                <h:outputText value="specifysoftware.org" /> 
                                            </h:outputLink>
                                            ).
                                        </h:panelGroup>


                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Finansiering</h:outputLabel>

                                        <h:column /> 
                                        <p>
                                            DINA-projektet stöds av de samarbetande institutionerna, Svenska Artprojektet, SLU och av Svenska LifeWatch.
                                        </p>
                                    </h:panelGrid>


                                    <h:panelGrid id="enVersion" rendered="#{!languages.swedish}">
                                         <h:outputLabel style="font-size: 20px;  font-weight: bold;" >What is Naturarv?</h:outputLabel>
                                        <h:column />

                                        <p style="font-size: 16px;">
                                            You can use this search portal to find information about specimens deposited at Swedish natural history collections. 
                                            The portal is presented by DINA, a national collaboration centered on digital collections management, 
                                            to support the dissemination of high quality information and increased knowledge of collection holdings.  </p>
                                        <h:column />
                                       
                                        <h:panelGroup>
                                            The target audience is primarily collections-based researchers and museum staff, but Naturarv was also designed to be a 
                                            resource for conservation agencies, amateur biologists, and policy-makers. The website is hosted at the Swedish Natural 
                                            History Museum and has been developed with feedback from working groups and staff throughout the country with a focus on 
                                            collections management issues. The searchable content increases as the result of ongoing specimen registration at Naturarv 
                                            collections as well as the addition of new collections. More information on searchable Naturarv collections can be found 
                                            under the heading
                                            <h:commandLink action="#{search.listCollections}"   
                                                           title="#{msg.ourcollections}" style="text-decoration: underline;" >    
                                                <h:outputText value="#{msg.ourcollections}" />    
                                                <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink>.  
                                        </h:panelGroup>
                                             

                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Part of a national infrastructure</h:outputLabel>

                                        <h:column /> 
                                       
                                        <h:panelGroup>
                                            Efforts to build a digital infrastructure for Swedish natural history collections were initiated under 2006 and the 
                                            start of the so-called DINA project (DINA stands for ”digital information system for natural history collections”). 
                                            Project membership first included only Swedish institutions (Swedish Museum of Natural History at Stockholm, 
                                            Evolution Museum at Uppsala, Natural History Museum at Gothenburg, Gothenburg Herbarium, and Biological Museums at Lund) 
                                            although this group has expanded with the addition of international consortium partners. For Swedish members, the objective 
                                            is to establish a nationally implemented platform for natural history collections data. More about DINA can be 
                                            found on the project website,   
                                            <h:outputLink value="#{msg.dinaurl}" target="_blank" style="text-decoration: underline;" > 
                                                <h:outputText value="dina-project.se" /> 
                                            </h:outputLink>.
                                        </h:panelGroup>
                                            
                                         

                                        <h:column /> 
                                        <h:panelGroup>
                                            Naturarv is intended to eventually contain information from all Swedish institutions that are DINA-project members. 
                                            The search portal is, therefore, a central part of of the international infrastructure. 
                                            Under the heading 
                                            <h:commandLink action="#{search.listPartners()}"   
                                                           title="#{msg.partners}" style="text-decoration: underline;" >    
                                                <h:outputText value="#{msg.partners}" />    
                                                <f:ajax render=":searchform:result welcomepagepanel searchPanel"/>
                                            </h:commandLink> 
                                            you can see which institutions contribute to Naturarv.
                                        </h:panelGroup>
 
                                        
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Technical collaboration for portal development</h:outputLabel>

                                        <h:column /> 
                                        <h:panelGroup>
                                            The development of Naturarv components has taken place within the larger context of DINA project collaboration and 
                                            distributed development by teams in Scandinavia, Estonia, USA, and Canada. Software produced as part of this collaboration 
                                            is distributed as open-source code. A major proportion of development in this group centers around the Specify 6 collections 
                                            management software clients and database schema (read more about this program at 
                                            <h:outputLink value="#{msg.specifyurl}" target="_blank" style="text-decoration: underline;" > 
                                                <h:outputText value="specifysoftware.org" /> 
                                            </h:outputLink>
                                            ).
                                        </h:panelGroup>


                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:column />
                                        <h:outputLabel style="font-size: 20px;  font-weight: bold;" >Financial Support</h:outputLabel>

                                        <h:column /> 
                                        <p>
                                            The DINA project is supported by participating institutions and project funding by the Swedish Species Service (SLU ArtDatabanken, Svenska Artprojektet) and Swedish LifeWatch.
                                        </p>
                                    </h:panelGrid>
                                </h:panelGrid>


                            </h:panelGrid>

                            <!-- ################################################ error report ############################################## --> 
                            <h:panelGrid id="errorReportingPanel" rendered="#{search.welcomeContent == 100}" >
                                <h:panelGrid  id="errorreportPanelwithcaptcha"  style="width: 850px;  ">
                                    <h:panelGrid style="text-align: center; width: 800px; "> 
                                        <p:outputLabel value="Error Report" style=" font-size: 24px; " /> 
                                    </h:panelGrid>
                                    
                                    <h:panelGrid columns="3" columnClasses="errorcol3,errorcol1,errorcol2" id="errorCheckPanel" style="width: 800px;">  
                                        <h:selectBooleanCheckbox value="#{errorReportBean.catalogNumber}" />
                                        <h:outputText value="#{msg.cataloguenumber}:" styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.catalogNum}" /> 

                                        <h:selectBooleanCheckbox value="#{errorReportBean.specimenName}" />
                                        <h:outputText value="#{msg.speciesname}:" styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.name}" />  

                                        <h:selectBooleanCheckbox value="#{errorReportBean.family}" />
                                        <h:outputText value="#{msg.family}:" styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.highTaxon}" />  

                                        <h:selectBooleanCheckbox value="#{errorReportBean.typeinfo}" />
                                        <h:outputText value="#{msg.type}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{dinaController.mapdata.detail.typeMaterial}" /> 

                                        <h:selectBooleanCheckbox value="#{errorReportBean.collector}" />
                                        <h:outputText value="#{msg.collector}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.collector}" /> 

                                        <h:selectBooleanCheckbox value="#{errorReportBean.date}" />
                                        <h:outputText value="#{msg.collectiondate}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.startDate}" />   
 
                                        <h:selectBooleanCheckbox value="#{errorReportBean.locality}" />  
                                        <h:outputText value="#{msg.locality}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.locality}" />   

                                        <h:selectBooleanCheckbox value="#{errorReportBean.country}" />
                                        <h:outputText value="#{msg.country}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.country}" />   

                                        <h:selectBooleanCheckbox value="#{errorReportBean.coordinate}" />
                                        <h:outputText value="#{msg.coordinate}:"  styleClass="boldtext" />   
                                        <h:outputText value="#{search.record.lat} -- #{search.record. lnt}" /> 


                                        <h:selectBooleanCheckbox value="#{errorReportBean.otherinfo}" />
                                        <h:outputText value="#{msg.remarks}:"  styleClass="boldtext" />   
                                        <h:panelGrid cellpadding="0" cellspacing="0">
                                            <ui:repeat value="#{search.record.remarks}" var="remark">   
                                                <h:outputText value="#{remark}" />  <br />
                                            </ui:repeat>  
                                        </h:panelGrid>

                                        <h:selectBooleanCheckbox value="#{errorReportBean.determinater}" />
                                        <h:outputText value="#{msg.determiner}:"  styleClass="boldtext" />    
                                        <h:outputText value="#{search.record.determiner}"/>  

                                    </h:panelGrid>

                                    <h:panelGrid width="580">
                                        <hr />
                                        <h:outputText value="#{msg.errordesc}"  styleClass="boldtext" />  
                                        <h:inputTextarea value="#{errorReportBean.errorDesc}" rows="8"  cols="110"   >
                                            <p:ajax event="blur"  listener="#{search.validateEmail()}" global="false" update="sendErrorReportBtnPanel"  />
                                        </h:inputTextarea> 
                                    </h:panelGrid>

                                    <h:column />
                                    <h:column /> 

                                    <h:panelGrid id="errorreportoremailpanel">
                                        <h:outputText value="#{msg.erroryouremail}"  styleClass="boldtext" />  
                                        <p:inputText id="erroryouremail"   size="40" required="false" 
                                                validatorMessage="#{msg.errmsgemailvalidation}"  styleClass="contactfieldstext" 
                                                value="#{errorReportBean.reportorsEmail}"> 
                                            <f:validateRegex pattern="(.+@.+\.[a-zA-Z]+)?" />  
                                            <p:ajax event="blur"  listener="#{search.validateEmail()}" global="false"
                                                    update="errorreportoremailpanel"  process="@this,erroryouremail" />
                                      
                                        </p:inputText> 
                                        <p:messages showDetail="false" for="erroryouremail" closable="true"   />
                                    </h:panelGrid>
                                    
                                    <p:messages showDetail="false" for="captcha" closable="true"   />
                                    <p:captcha id="captcha" validatorMessage="Captcha value is required." ></p:captcha> 
                                    
                                     
                                    <br/>  
                                </h:panelGrid> 
                                
                                 
                                 
                                
                                <h:panelGrid id="sendErrorReportBtnPanel" style="float: right; " >
                                    <p:commandButton value="#{msg.sendbutton}"  actionListener="#{search.senderrorreport}" 
                                                     update=":searchform:result welcomepagepanel :searchform:searchPanel" 
                                                     rendered="#{not empty errorReportBean.errorDesc}"  /> 
                                    
                                    
                                    <p:commandButton value="#{msg.sendbutton}" actionListener="#{search.senderrorreport}" 
                                                     update=":searchform:result welcomepagepanel :searchform:searchPanel" 
                                                     rendered="#{empty errorReportBean.errorDesc}"   >
                                        <p:confirm header="Confirmation" message="#{msg.confirmationbeforesendmsg}" 
                                                   icon="ui-icon-alert" /> 
                                    </p:commandButton> 
                                </h:panelGrid>


                            
                            </h:panelGrid>
                        </h:panelGrid>
                    </h:panelGrid>

                    <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" style="color:   #FFFFFF;"   />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" style="color:   #FFFFFF;"   />
                    </p:confirmDialog>

                    <h:panelGroup  id="result" layout="block" >
                        <h:panelGroup rendered="#{search.resultPage}" layout="block"   > 
                            <!-- result header --> 
                            <h:panelGrid id="resultheader" styleClass="shoutcutpanel"  cellpadding="0" cellspacing="0" >
                                <h:panelGrid id="displayviewpanel" columns="4" 
                                             columnClasses="resultheaderemptycolumn,resultheadermaplinkcolumn,resultheadermaplinkcolumn,resultheadermaplinkcolumn"  
                                             rendered="#{search.resultsExist}">

                                    <h:panelGroup layout="block" > 
                                        <h:panelGroup layout="block" id="numSelected" rendered="#{3 > search.resultview}"   >
                                            <h:outputText value="#{msg.numselected}: #{search.selectedRecords.size()}" 
                                                          style="font-size: 11px;" rendered="#{search.selectedRecords.size() != 0}"  />     
                                        </h:panelGroup>

                                        <!-- result in map view -->
                                        <h:panelGroup id="numinmapPanel" layout="block" rendered="#{search.resultview == 3}" >  
                                            (<h:outputText value="#{statistic.totalWithMap}" />
                                            <p:spacer width="10"  />
                                            <h:outputText value="#{msg.hits}"   />)  
                                        </h:panelGroup>  
                                    </h:panelGroup>


                                    <h:panelGrid cellpadding="0" cellspacing="0"  rendered="#{statistic.totalWithMap == 0}" >   
                                        <p:spacer width="30" height="5" />
                                    </h:panelGrid> 

                                    <h:panelGrid cellpadding="0" cellspacing="0"  rendered="#{statistic.totalWithImage != 0}" >   
                                        <h:commandLink action="#{search.closeImageView}"  title="#{msg.viewinlist}"  rendered="#{search.resultview == 4}" >   
                                            <h:panelGrid columns="3" cellpadding="0" cellspacing="0"  > 
                                                <h:outputText value="#{msg.viewinlist}"    style="font-size: 11px;"  />     
                                            </h:panelGrid> 
                                            <f:ajax render="result globe allimagePanel searchPanel" /> 
                                        </h:commandLink>   

                                        <h:commandLink action="#{search.showallimages}"  title="#{msg.viewinimage}" rendered="#{search.resultview != 4}"  >   
                                            <h:panelGrid  cellpadding="0" cellspacing="0"  > 
                                                <h:outputText value="#{msg.viewinimage}"    style="font-size: 11px; "  />     
                                            </h:panelGrid> 
                                            <f:ajax render="result globe allimagePanel searchPanel" /> 
                                        </h:commandLink>   
                                    </h:panelGrid> 
                                    <h:panelGrid cellpadding="0" cellspacing="0"  rendered="#{statistic.totalWithImage == 0}" >   
                                        <p:spacer width="10"  />
                                    </h:panelGrid> 



                                    <h:panelGrid cellpadding="0" cellspacing="0"  rendered="#{statistic.totalWithMap != 0}">  
                                        <h:commandLink action="#{search.closeWholeMap}"  title="#{msg.viewinlist}"  rendered="#{search.resultview == 3}" >   
                                            <h:panelGrid columns="3" cellpadding="0" cellspacing="0"  > 
                                                <h:outputText value="#{msg.viewinlist}"    style="font-size: 11px;"  />     
                                            </h:panelGrid> 
                                            <f:ajax render="result globe searchPanel" /> 
                                        </h:commandLink>   

                                        <h:commandLink action="#{search.showallmap}"  title="#{msg.viewinmap}" rendered="#{search.resultview != 3}"  >   
                                            <h:panelGrid  cellpadding="0" cellspacing="0"  > 
                                                <h:outputText value="#{msg.viewinmap}"    style="font-size: 11px;"  />     
                                            </h:panelGrid> 
                                            <f:ajax render="result globe searchPanel" /> 
                                        </h:commandLink>   
                                    </h:panelGrid> 

                                    <p:commandLink id="downlodlink"   action="#{search.export}" 
                                                   style="font-family: verdana,arial,helvetica,sans-serif; font-size: 11px; margin: 0;" >  
                                        <h:panelGrid columns="3" cellpadding="0" cellspacing="0"  >
                                            <h:outputText value="#{msg.downloadall}"    
                                                          style="font-size: 11px;" rendered="#{search.selectedRecords.size() == 0}" />  
                                            <h:outputText value="#{msg.downloadonlychecked}"    
                                                          style="font-size: 11px;" rendered="#{search.selectedRecords.size() > 0}" />  
                                        </h:panelGrid>
                                    </p:commandLink>

                                    <p:overlayPanel id="downloadFormatListPanel" for="downlodlink" hideEffect="fade" >  
                                        <h:panelGrid id="maxiumdownloadmsg"  cellpadding="0" cellspacing="0"  rendered="#{search.overMaxium}" >
                                            <h:panelGrid  columns="4"   cellpadding="0" cellspacing="0" 
                                                          style="float: left; text-align:  left;" 
                                                          columnClasses="alignTop,alignTop,alignTop" > 
                                                <p:spacer width="12" />
                                                <p:graphicImage value="/resources/images/icons/exclaim_yellow.gif" alt="warning"  title="warning" />   
                                                <p:spacer width="12" />  
                                                <h:outputText value="#{msg.maxiumdownload}"  style="font-size: 11px; color: red;" />    
                                            </h:panelGrid>
                                        </h:panelGrid>

                                        <h:panelGrid columns="6"   cellpadding="0" cellspacing="0"  >
                                            <p:spacer width="52" height="10"/>    
                                            <h:commandLink>     
                                                <p:graphicImage value="/resources/images/xml.png" alt="XML"  title="XML" styleClass="images" />     
                                                <p:dataExporter type="xml" target="exportDataTable" fileName="dina_data" />  
                                            </h:commandLink>  
                                            <p:spacer width="55" />
                                            <h:commandLink>     
                                                <p:graphicImage value="/resources/images/excel.png"  alt="XLS"  title="XLS" styleClass="images"/>    
                                                <p:dataExporter type="xls" target="exportDataTable" fileName="dina_data" />  
                                            </h:commandLink>  
                                            <p:spacer width="55" />
                                            <h:commandLink>     
                                                <p:graphicImage value="/resources/images/csv.png"  alt="CSV"  title="CSV" styleClass="images"/>       
                                                <p:dataExporter type="csv" target="exportDataTable" 
                                                                fileName="dina_data"   />  
                                            </h:commandLink>  
                                            <ui:remove>
                                                <p:spacer width="55" />  
                                                <h:commandLink>      
                                                    <p:graphicImage value="/resources/images/icons/pdf.png"  alt="PDF"  title="PDF"  styleClass="images"/>       
                                                    <p:dataExporter type="pdf" target="exportDataTablePDF" 
                                                                    fileName="dina_data"   encoding="CP1252"   />   
                                                </h:commandLink>   
                                            </ui:remove>

                                        </h:panelGrid>  
                                    </p:overlayPanel>  
                                     
                                </h:panelGrid>  
                            </h:panelGrid>
                            
                            
                            <h:panelGroup styleClass="searchColumn" layout="block"   rendered="#{search.resultsExist}" >
                                <hr /> 
                            </h:panelGroup>    

                           

                            <h:panelGrid columns="3" id="simpleresult" columnClasses="searchColumn,emptyColumn,statisticColumn" 
                                         cellpadding="0" cellspacing="0"  > 
                                <h:panelGrid styleClass="searchColumn"  cellpadding="0" cellspacing="0"  rendered="#{!search.resultsExist}" >
                                    <h:outputText value="#{msg.noresult}" /> 
                                </h:panelGrid>   

                                <h:panelGrid cellpadding="0" cellspacing="0" rendered="#{search.resultsExist}" >
                                    <h:panelGrid id="lisdetailresult" cellpadding="0" cellspacing="0" >
                                         
                                        
                                        
                                        <h:panelGrid columns="3" rendered="#{search.resultview == 2}"  >
                                            <h:panelGrid columns="3">
                                                <h:selectBooleanCheckbox id="selectallbox" value="#{search.selectall}"  >
                                                    <f:ajax event="click" listener="#{search.removeall}"  render=":searchform:result :searchform:maxiumdownloadmsg" />
                                                </h:selectBooleanCheckbox> 
                                                <p:spacer width="4" /> 
                                                <h:outputText value="#{msg.removeAllQueries}" />
                                            </h:panelGrid> 
                                            <p:spacer width="400" height="20"/> 
                                            <h:panelGrid columns="6" > 
                                                 <h:outputText value="#{msg.backtolistview}:" />
                                                <p:spacer width="8" /> 
                                                <h:commandLink action="#{search.simpleview}"  >    
                                                    <h:graphicImage library="images/icons" name="list.png" alt="list view" title="#{msg.simple}" styleClass="images"   />  
                                                    <f:ajax  render=":searchform:result"    /> 
                                                </h:commandLink> 

                                                <p:spacer width="8" /> 
                                                <h:commandLink action="#{search.detailview}"  >    
                                                    <h:graphicImage library="images/icons" name="detail.png" alt="detail view" title="#{msg.list}" styleClass="images" /> 
                                                    <f:ajax  render=":searchform:result"    /> 
                                                </h:commandLink>  
                                                <p:spacer width="8" />
                                            </h:panelGrid> 
                                        </h:panelGrid> 
                                        
                                        
                                        
                                        <!-- simple and detail list -->
                                        <h:panelGrid columns="3" style="margin-left: 4px; " cellpadding="0" cellspacing="0" rendered="#{2 > search.resultview}">
                                             
                                            <h:panelGroup layout="block" > 
                                                <h:outputText value="#{pagingNavigation.resultViewStart}-#{pagingNavigation.end} #{msg.of} #{pagingNavigation.totalFound} #{msg.hits}" />
                                                <p:spacer width="8" /> 
                                                <h:outputText value="| #{msg.numpage}:"  />
                                                <p:spacer width="8" />
                                                <h:selectOneMenu value="#{search.numDisplay}" id="numPerPage" style="width: 50px;">
                                                    <f:selectItem itemValue="10" itemLabel="10" />
                                                    <f:selectItem itemValue="25" itemLabel="25" />
                                                    <f:selectItem itemValue="50" itemLabel="50" />
                                                    <f:ajax event="change" render=":searchform:result" 
                                                            listener="#{search.changeNumDisplay}" />  
                                                </h:selectOneMenu> 
                                                <p:spacer width="8" /> 
                                                <h:outputText value="| #{msg.sort}:"  />
                                                <p:spacer width="8" />
                                                <h:selectOneMenu value="#{search.sortby}" id="sort" style="width: 90px;">
                                                    <f:selectItem itemValue="score" itemLabel="#{msg.relevance}" /> 
                                                    <f:selectItem itemValue="ftx" itemLabel="#{msg.taxon}" /> 
                                                    <f:selectItem itemValue="sd" itemLabel="#{msg.collectiondate}" /> 
                                                    <f:ajax event="change" render=":searchform:result"  listener="#{search.sortresult}" />  
                                                </h:selectOneMenu> 
                                                <p:spacer width="8" /> 
                                                <h:outputText value="| #{msg.show}:"  />
                                                <p:spacer width="8" />  
                                            </h:panelGroup>

                                            <h:panelGrid columns="5">
                                                <h:commandLink action="#{search.simpleview}"  >    
                                                    <h:graphicImage library="images/icons" name="list.png" alt="list view" title="#{msg.simple}" styleClass="images"   />  
                                                    <f:ajax  render=":searchform:result"    /> 
                                                </h:commandLink> 

                                                <p:spacer width="4" /> 
                                                <h:commandLink action="#{search.detailview}"  >    
                                                    <h:graphicImage library="images/icons" name="detail.png" alt="detail view" title="#{msg.list}" styleClass="images" /> 
                                                    <f:ajax  render=":searchform:result"    /> 
                                                </h:commandLink>  
                                                
                                                <p:spacer width="4" /> 
                                                <h:commandLink action="#{search.selectedview}" rendered="#{search.selectedRecords.size() > 0}" >    
                                                    <h:graphicImage library="images/icons" name="form_input_checkbox_20.png" alt="checked view" title="#{msg.selectedlist}" styleClass="images" /> 
                                                    <f:ajax  render=":searchform:result"    /> 
                                                </h:commandLink>  
                                            </h:panelGrid>  
                                        </h:panelGrid>

                                        <h:panelGrid styleClass="searchColumn"  cellpadding="0" cellspacing="0"  rendered="#{3 > search.resultview}" >
                                            <hr /> <br />
                                        </h:panelGrid> 

                                        <!-- simple list -->
                                        <h:panelGrid cellpadding="0" cellspacing="0" styleClass="searchColumn" rendered="#{search.resultview == 0}">  
                                            <p:dataTable id="simpleDataResultTable" var="result" value="#{search.resultList}"   
                                                         paginator="false"  rowIndexVar="indexCount"   
                                                         rowKey="#{result.catalogNum}" styleClass="simpleResultTable"> 
                                                <p:column style="font-size: 11px; width : 15px; "  > 
                                                    <h:selectBooleanCheckbox id="selectone" value="#{result.selected}" style="margin-top: 2px; margin-left: 2px;">
                                                        <f:ajax event="click" listener="#{search.selectone(result)}"  render=":searchform:result :searchform:maxiumdownloadmsg" />
                                                    </h:selectBooleanCheckbox> 
                                                </p:column>
                                                <p:column style="font-size: 11px; width : 600px; "> 
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                                        <h:panelGrid columns="2" columnClasses="resultTableImageColumn,resultTableDataColumn"  
                                                                     cellpadding="0" cellspacing="0">
                                                            <h:graphicImage library="images" 
                                                                            name="icons/discipline/#{result.disciplineIconId}.png"   
                                                                            styleClass="images" />  

                                                            <h:commandLink action="#{search.showOneDetail(result)}"  >    
                                                                <h:outputText value="#{result.name}" style="font-weight: bold; font-size: 13px; color: 	#808080;"/>  
                                                                <f:ajax render=":searchform:result"/>
                                                            </h:commandLink>   

                                                            <p:spacer width="5" height="5" />
                                                            <p:spacer width="5" height="5" />
                                                             
                                                            <p:spacer width="5" height="5" rendered="#{result.mbid == null}"  /> 
                                                            <p:commandLink rendered="#{result.mbid != null}" 
                                                                           action="#{search.displayImages(result)}" update=":searchform:result :searchform:imgswitchdialog" >
                                                                <p:graphicImage value="/resources/images/icons/camera-min16x12.gif" 
                                                                                title="#{msg.showimages}" alt="#{msg.showimages}"
                                                                                styleClass="images" /> 
                                                            </p:commandLink>
                                                           
                                                            
                                                            
                                                            
                                                            <h:panelGrid  columns="2"  cellpadding="0" cellspacing="0" columnClasses="simpleTableLabelCol,simpleTableValueCol"> 
                                                                <h:outputText value="#{msg.highertaxa}: " />  
                                                                <h:outputText value="#{result.highTaxon}" />

                                                                <h:outputText value="#{msg.collectiondate}: " /> 
                                                                <h:outputText value="#{result.startDate}"  >
                                                                    <!--                                                                    <f:convertDateTime pattern="yyyy-MM-dd" />-->
                                                                    <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                                                </h:outputText>

                                                                <h:outputText value="#{msg.locality}: " />  
                                                                <h:outputText value="#{result.locality}" />

                                                                <h:outputText value="#{msg.cataloguenumber}: " /> 
                                                                <h:outputText value="#{result.catalogNum}" /> 
                                                            </h:panelGrid> 

                                                            
                                                            
                                                            <p:spacer width="5" height="5" />
                                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="imagePanel" >   
                                                                 
                                                                <h:panelGrid  rendered="#{result.displayImage}"> 
                                                                    <h:commandLink action="#{search.closeImage(result)}" value="#{msg.closeimage}">    
                                                                        <f:ajax render="imagePanel"/>
                                                                    </h:commandLink>   

                                                                    <ui:repeat value="#{result.thumbs}" var="thumb">    
                                                                        <p:commandLink  action="#{imageSwitcher.imageSwitch(result)}" 
                                                                                        oncomplete="PF('imgswitchdlg').show()" 
                                                                                        update=":searchform:imageswitchpanel">
                                                                            <p:graphicImage value="#{thumb}" title="#{result.fullname}/#{result.catalogNum}" 
                                                                                            alt="#{result.catalogNum}" styleClass="imageswithpedding" /> 

                                                                        </p:commandLink>  
                                                                        
                                                                    </ui:repeat>   
                                                                </h:panelGrid>
                                                            </h:panelGrid>
                                                             


                                                            <p:spacer width="5" height="5" />
                                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="singleMap" >   
                                                                <h:panelGrid rendered="#{result.displayMap}"> 
                                                                    <h:commandLink action="#{search.closeMap(result)}" value="#{msg.closemap}" rendered="#{result.coordinate == 0}">    
                                                                        <f:ajax render="singleMap"/>
                                                                    </h:commandLink> 
                                                 
                                                                    <f:view> 
                                                                        <p:gmap center="#{result.lat1}, #{result.lnt1}" type="ROADMAP"
                                                                                zoom="8" model="#{mapBean.getAdvancedModel(result)}" 
                                                                                style="width:600px; height:300px" fitBounds="false"   >  

                                                                            <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" />  

                                                                            <p:gmapInfoWindow >  
                                                                                <p:outputPanel  style="text-align:center;display:block;margin:auto; overflow: visible; width: 300px; ">   
                                                                                    <h:panelGrid columns="2" >
                                                                                        <h:graphicImage library="images" name="pin_1.png" alt="pin"   styleClass="images" /> 
                                                                                        <h:outputText value="#{result.locality}"  style=" font-size: 9px;" />   
                                                                                        <h:column />
                                                                                        <h:outputText value="#{result.lat} -- #{result.lnt}" style=" font-size: 9px;" />    
                                                                                    </h:panelGrid> 
                                                                                </p:outputPanel>   
                                                                            </p:gmapInfoWindow>  
                                                                        </p:gmap> 
                                                                    </f:view>  
                                                                </h:panelGrid>
                                                            </h:panelGrid>



                                                            <p:spacer width="10" height="5" />
                                                            <h:panelGroup layout="block" >  
                                                                <p:commandLink value="#{msg.showmap}" rendered="#{result.coordinate == 0}"
                                                                               action="#{search.showmap(result)}"    
                                                                               update=":searchform:result" /> 

                                                                <p:spacer width="10" height="5" rendered="#{result.coordinate == 0}" />
                                                                
                                                                
                                                                <h:outputLink id="scientificNameLinkNrmSingle" value="http://naturforskaren.se/search/#{result.fullname.trim()}"  
                                                                              title="scientificname"  target="_blank" >                   
                                                                    <h:outputText value="#{msg.showintaxonpages}"  style="font-family: Arial,sans-serif;" />   
                                                                </h:outputLink>   

                                                                <p:spacer width="10" height="5" />
                                                                
                                                                
                                                                
                                                                <p:commandLink value="#{msg.errorreport}"    process="@this"  global="false"
                                                                                   action="#{search.errorreport(result)}" 
                                                                                   update=":searchform:result :searchform:welcomepagepanel" /> 
                                                                
                                                                <ui:remove>
                                                                    <p:commandLink value="#{msg.errorreport}"  oncomplete="PF('dlg').show()" 
                                                                               action="#{search.errorreport(result)}"    process="@this"  global="false"
                                                                               update=":searchform:errorreportPanel" />  
                                                                </ui:remove>
                                                                

                                                            </h:panelGroup> 

                                                            <p:spacer width="10" height="20" />
                                                            <p:spacer width="10" height="20" />


                                                        </h:panelGrid>  

                                                    </h:panelGrid>

                                                </p:column>  
                                            </p:dataTable> 
                                        </h:panelGrid>

                                        <h:panelGrid id="detailresult" cellpadding="0" cellspacing="0" styleClass="searchColumn" rendered="#{search.resultview == 1}"> 


                                            <p:dataTable id="detailTable" var="record" value="#{search.resultList}"  
                                                         rowKey="#{record.catalogNum}"  styleClass="detailTable"
                                                         paginator="false" rowIndexVar="indexCount"   >   
                                                <p:column> 
                                                    <h:selectBooleanCheckbox id="selectone" value="#{record.selected}" >
                                                        <f:ajax event="click" listener="#{search.selectone(record)}"  render=":searchform:result :searchform:maxiumdownloadmsg" />
                                                    </h:selectBooleanCheckbox>
                                                </p:column>

                                                <p:column>   
                                                    <h:panelGrid columns="3" columnClasses="tableIconCol,simpleTableLabelCol,simpleTableValueCol"  
                                                                 cellpadding="0" cellspacing="0"> 

                                                         <h:graphicImage library="images" 
                                                                         name="icons/discipline/#{record.disciplineIconId}.png"   
                                                                         styleClass="images" />  
                                                        <h:outputText value="#{msg.cataloguenumber}:" />   
                                                        <h:outputText value="#{record.catalogNum}" />  
                                                        
                                                        <p:spacer width="5" height="5" />
                                                        <p:spacer width="5" height="5" />
                                                        <p:spacer width="5" height="5" />

                                                        <p:spacer width="5" height="5" rendered="#{record.mbid == null}"  />  
                                                        <p:commandLink rendered="#{record.mbid != null}" 
                                                                       action="#{search.displayImages(record)}" update=":searchform:result" >
                                                            <p:graphicImage value="/resources/images/icons/camera-min16x12.gif" 
                                                                            title="#{msg.showimages}" alt="#{msg.showimages}"
                                                                            styleClass="images" /> 
                                                        </p:commandLink>  
                                                        <h:outputText value="#{msg.speciesname}:" />   
                                                        <h:outputText value="#{record.name}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.highertaxa}:" />   
                                                        <h:outputText value="#{record.highTaxon}" />

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.collection}:" />   
                                                        <h:outputText value="#{record.collectionName}" />

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.type}:"  />   
                                                        <h:outputText value="#{record.type}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.author}:"  />   
                                                        <h:outputText value="#{record.auth}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.synonyms}:" />   
                                                        <h:outputText value="#{record.sym}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.stationfieldnumber}:"  />   
                                                        <h:outputText value="#{record.stationFieldNumber}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.collectiondate}:"  />     
                                                        <h:outputText value="#{record.startDate}"  >
                                                            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                                            <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                                                        </h:outputText>
                                                        
                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.catalogeddate}:"  />     
                                                        <h:outputText value="#{record.catalogedDate}"  >
                                                            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                                            <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                                                        </h:outputText>

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.locality}:"   />   
                                                        <h:outputText value="#{record.locality}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.country}:"  />   
                                                        <h:outputText value="#{record.country}" />   

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.continent}:"   />   
                                                        <h:outputText value="#{record.continent}" />  

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.coordinate}:" />    
                                                        <h:panelGroup layout="block" rendered="#{record.coordinate == 0}" >
                                                            <h:outputText value="#{record.lat}" /> -- <h:outputText value="#{record.lnt}" />
                                                        </h:panelGroup>

                                                        <h:panelGrid rendered="#{record.coordinate != 0}">  
                                                            <p:spacer width="10" height="10" />
                                                        </h:panelGrid> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.collector}:" />   
                                                        <h:outputText value="#{record.collector}" /> 

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.determiner}:" />   
                                                        <h:outputText value="#{record.determiner}" />   

                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.remarks}:" />   
                                                        <h:panelGrid cellpadding="0" cellspacing="0">
                                                            <ui:repeat value="#{record.remarks}" var="remark">   
                                                                <h:outputText value="#{remark}" />  <br />
                                                            </ui:repeat>  
                                                        </h:panelGrid>
                                                        
                                                        <p:spacer width="5" height="5" />
                                                        <h:outputText value="#{msg.accessionRemarks}:" />   
                                                        <h:panelGrid cellpadding="0" cellspacing="0">
                                                            <ui:repeat value="#{record.accessionRemarks}" var="aremark">   
                                                                <h:outputText value="#{aremark}" />  <br />
                                                            </ui:repeat>  
                                                        </h:panelGrid>
                                                           

                                                    </h:panelGrid>

                                                    <p:spacer width="5" height="5" />
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="imagePanelDetailResult" >   

                                                        <h:panelGrid  rendered="#{record.displayImage}"> 
                                                            <h:commandLink action="#{search.closeImage(record)}" value="#{msg.closeimage}">    
                                                                <f:ajax render="imagePanelDetailResult"/>
                                                            </h:commandLink>    
                                                            <ui:repeat value="#{record.thumbs}" var="thumb">    
                                                                <p:commandLink  action="#{imageSwitcher.imageSwitch(record)}"  
                                                                                oncomplete="PF('imgswitchdlg').show();" update=":searchform:imageswitchpanel">
                                                                    <p:graphicImage value="#{thumb}" title="#{record.fullname}/#{record.catalogNum}" 
                                                                                    alt="#{record.catalogNum}"  styleClass="imageswithpedding" /> 

                                                                </p:commandLink>  

                                                            </ui:repeat>   
                                                        </h:panelGrid>
                                                    </h:panelGrid>
 

                                                    <h:panelGrid  cellpadding="0" cellspacing="0" id="singleMapDetial">   
                                                        <h:panelGrid rendered="#{record.displayMap}"> 
                                                            <h:commandLink action="#{search.closeMap(record)}" value="#{msg.closemap}" rendered="#{record.coordinate == 0}">    
                                                                <f:ajax render="singleMapDetial"/>
                                                            </h:commandLink> 
                                                            <f:view> 
                                                                <p:gmap center="#{record.lat1}, #{record.lnt1}" type="ROADMAP"
                                                                        zoom="8" model="#{mapBean.getAdvancedModel(record)}"
                                                                        style="width:600px;height:300px" fitBounds="false"   >  

                                                                    <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" />  

                                                                    <p:gmapInfoWindow >  
                                                                        <p:outputPanel  style="text-align:center;display:block;margin:auto; overflow: visible; width: 300px; ">   
                                                                            <h:panelGrid columns="2" >
                                                                                <h:graphicImage library="images" name="pin_1.png" alt="pin"   styleClass="images" /> 
                                                                                <h:outputText value="#{record.locality}"  style=" font-size: 9px;" />   
                                                                                <h:column />
                                                                                <h:outputText value="#{record.lat} -- #{record.lnt}" style=" font-size: 9px;" />  
                                                                            </h:panelGrid> 
                                                                        </p:outputPanel>   
                                                                    </p:gmapInfoWindow>  
                                                                </p:gmap> 
                                                            </f:view>  
                                                        </h:panelGrid>
                                                        <p:spacer width="50" height="20" />
                                                        <h:panelGroup layout="block">  
                                                            <h:commandLink action="#{search.showmap(record)}" value="#{msg.showmap}" rendered="#{record.coordinate == 0}" style="font-family: Arial,sans-serif;">    
                                                                <f:ajax render=":searchform:result"/>
                                                            </h:commandLink>   
                                                            <p:spacer width="10" height="5" /> 

                                                            <h:outputLink id="scientificNameLinkNrmDetail" value="http://naturforskaren.se/search/#{record.fullname.trim()}"  
                                                                          title="scientificname"  target="_blank" >  
                                                                <h:outputText value="#{msg.showintaxonpages}"  style="font-family: Arial,sans-serif;" />   
                                                            </h:outputLink> 

                                                            <p:spacer width="10" height="5" />
                                                            
                                                            <p:commandLink value="#{msg.errorreport}"    process="@this"  global="false"
                                                                                   action="#{search.errorreport(record)}" 
                                                                                   update=":searchform:result :searchform:welcomepagepanel" /> 
                                                            
                                                            <ui:remove>
                                                                <p:commandLink value="#{msg.errorreport}" oncomplete="PF('dlg').show();" 
                                                                           action="#{search.errorreport(record)}"     
                                                                           update=":searchform:errorreportPanel" /> 
                                                            </ui:remove>
                                                            
                                                        </h:panelGroup> 

                                                        <p:spacer width="50" height="20" />
                                                    </h:panelGrid> 
                                                </p:column>   
                                            </p:dataTable>  
                                        </h:panelGrid>
 
                                        <h:panelGrid id="navigationPanel" columnClasses="navigationpanel" rendered="#{search.resultsExist}" >
                                          
                                                <h:panelGroup  id="floatleftcol"  layout="block" rendered="#{2 > search.resultview}"> 
                                                    <h:commandLink action="#{search.firstPage}"  disabled="#{pagingNavigation.previousDisable}" >    
                                                        <h:graphicImage library="images/icons" name="first.gif" alt="#{msg.first}" title="#{msg.first}" 
                                                                        styleClass="imageswithtopmarging" rendered="#{!pagingNavigation.previousDisable}"  />  
                                                        <h:graphicImage library="images/icons" name="first_disable.gif" alt="#{msg.first}" title="#{msg.first}"  
                                                                        styleClass="imageswithtopmarging" rendered="#{pagingNavigation.previousDisable}"  />  
                                                        <f:ajax  render=":searchform:result"    /> 
                                                    </h:commandLink> 
                                                    <p:spacer width="15" height="5" />
                                                    <h:commandLink action="#{search.previousPage}" disabled="#{pagingNavigation.previousDisable}" >    
                                                        <h:graphicImage library="images/icons" name="prev.gif" alt="#{msg.previous}" title="#{msg.previous}" 
                                                                        styleClass="imageswithtopmarging" rendered="#{!pagingNavigation.previousDisable}"  />  
                                                        <h:graphicImage library="images/icons" name="prev_disable.gif" alt="#{msg.previous}" title="#{msg.previous}"  
                                                                        styleClass="imageswithtopmarging" rendered="#{pagingNavigation.previousDisable}"  />  
                                                        <f:ajax  render=":searchform:result"    /> 
                                                    </h:commandLink> 
                                                    <p:spacer width="15" height="5" />
                                                    <ui:repeat var="page" value="#{pagingNavigation.pages}" varStatus="status" >
                                                        <h:commandLink action="#{search.changePage(page)}" disabled="#{page == pagingNavigation.currentPage}" > 
                                                            <h:outputText value= "#{page}" style="font-weight: bold; color: #909090 ;  vertical-align: top;"  rendered="#{page == pagingNavigation.currentPage}" />
                                                            <h:outputText value= "#{page}" style="font-weight: bold; color: #000000;  vertical-align: top;" rendered="#{page != pagingNavigation.currentPage}"  />
                                                            <f:ajax render=":searchform:result"/> 
                                                        </h:commandLink>   
                                                        <p:spacer width="15" height="5" />
                                                    </ui:repeat>  
                                                    
                                                   <h:commandLink action="#{search.nextPage}"  disabled="#{pagingNavigation.nextDisable}" >    
                                                            <h:graphicImage library="images/icons" name="next.gif" alt="#{msg.next}" title="#{msg.next}" 
                                                                            styleClass="imageswithtopmarging" rendered="#{!pagingNavigation.nextDisable}"  />  
                                                            <h:graphicImage library="images/icons" name="next_disable.gif" alt="#{msg.next}" title="#{msg.next}"  
                                                                            styleClass="imageswithtopmarging" rendered="#{pagingNavigation.nextDisable}"  />  
                                                            <f:ajax  render=":searchform:result"    /> 
                                                        </h:commandLink> 
                                                    <p:spacer width="15" height="5" />
                                                    <h:commandLink action="#{search.lastPage}" disabled="#{pagingNavigation.nextDisable}" >    
                                                            <h:graphicImage library="images/icons" name="last.gif" alt="#{msg.last}" title="#{msg.last}" 
                                                                            styleClass="imageswithtopmarging" rendered="#{!pagingNavigation.nextDisable}"  />  
                                                            <h:graphicImage library="images/icons" name="last_disable.gif" alt="#{msg.last}" title="#{msg.last}"  
                                                                            styleClass="imageswithtopmarging" rendered="#{pagingNavigation.nextDisable}"  />  
                                                            <f:ajax  render=":searchform:result"    /> 
                                                        </h:commandLink> 
                                                </h:panelGroup>   
     
                                        </h:panelGrid> 
 
                                        <h:panelGrid id="checkedList" cellpadding="0" cellspacing="0" 
                                                     styleClass="searchColumn" rendered="#{search.resultview == 2}"> 
                                            <p:dataTable id="checkedTable" var="record" value="#{search.selectedRecords}"  
                                                     paginator="true"      rows="10"    styleClass="noheader"   paginatorPosition="bottom"
                                                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                                        rowsPerPageTemplate="5,10,15" >  
                                         
                                                <p:column> 
                                                    <h:selectBooleanCheckbox id="selectone" value="#{record.selected}" >
                                                        <f:ajax event="click" listener="#{search.removeone(record)}"  render=":searchform:result :searchform:maxiumdownloadmsg" />
                                                    </h:selectBooleanCheckbox>
                                                </p:column>

                                                <p:column>  
                                                    <h:panelGrid columns="2" columnClasses="simpleTableLabelCol,simpleTableValueCol"  
                                                                 cellpadding="0" cellspacing="0"> 

                                                        <h:outputText value="#{msg.cataloguenumber}:" />   
                                                        <h:outputText value="#{record.catalogNum}" />  


                                                        <h:outputText value="#{msg.speciesname}:" />   
                                                        <h:outputText value="#{record.name}" /> 

                                                        <h:outputText value="#{msg.highertaxa}:" />   
                                                        <h:outputText value="#{record.highTaxon}" />

                                                        <h:outputText value="#{msg.collection}:" />   
                                                        <h:outputText value="#{record.collectionName}" />

                                                        <h:outputText value="#{msg.type}:"  />   
                                                        <h:outputText value="#{record.type}" /> 

                                                        <h:outputText value="#{msg.author}:"  />   
                                                        <h:outputText value="#{record.auth}" /> 

                                                        <h:outputText value="#{msg.synonyms}:" />   
                                                        <h:outputText value="#{record.sym}" /> 

                                                        <h:outputText value="#{msg.stationfieldnumber}:"  />   
                                                        <h:outputText value="#{record.stationFieldNumber}" /> 

                                                        <h:outputText value="#{msg.collectiondate}:"  />     
                                                        <h:outputText value="#{record.startDate}"  >
                                                            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                                            <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                                                        </h:outputText>

                                                        <h:outputText value="#{msg.catalogeddate}:"  />     
                                                        <h:outputText value="#{record.catalogedDate}"  >
                                                            <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                                            <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                                                        </h:outputText>

                                                        <h:outputText value="#{msg.locality}:"   />   
                                                        <h:outputText value="#{record.locality}" /> 

                                                        <h:outputText value="#{msg.country}:"  />   
                                                        <h:outputText value="#{record.country}" />   

                                                        <h:outputText value="#{msg.continent}:"   />   
                                                        <h:outputText value="#{record.continent}" />  

                                                        <h:outputText value="#{msg.coordinate}:" />    
                                                        <h:panelGroup layout="block" rendered="#{record.coordinate == 0}" >
                                                            <h:outputText value="#{record.lat}" /> -- <h:outputText value="#{record.lnt}" />
                                                        </h:panelGroup>

                                                        <h:panelGrid rendered="#{record.coordinate != 0}">  
                                                            <p:spacer width="10" height="10" />
                                                        </h:panelGrid> 

                                                        <h:outputText value="#{msg.collector}:" />   
                                                        <h:outputText value="#{record.collector}" />   

                                                        <h:outputText value="#{msg.determiner}:" />   
                                                        <h:outputText value="#{record.determiner}" />   

                                                        <h:outputText value="#{msg.remarks}:" /> 
                                                        <h:panelGrid cellpadding="0" cellspacing="0">
                                                            <ui:repeat value="#{record.remarks}" var="remark">   
                                                                <h:outputText value="#{remark}" />  <br />
                                                            </ui:repeat>  
                                                        </h:panelGrid>

                                                    </h:panelGrid>
  
                                                    <h:panelGrid  cellpadding="0" cellspacing="0" id="singleMapChecked">   
                                                        <h:panelGrid rendered="#{record.displayMap}"> 
                                                            <h:commandLink action="#{search.closeMap(record)}" value="#{msg.closemap}" rendered="#{record.coordinate == 0}">    
                                                                <f:ajax render="singleMapChecked"/>
                                                            </h:commandLink> 
                                                            <f:view> 
                                                                <p:gmap center="#{record.lat1}, #{record.lnt1}" type="ROADMAP"
                                                                        zoom="8" model="#{mapBean.getAdvancedModel(record)}"
                                                                        style="width:600px;height:300px" fitBounds="false"  
                                                                        >  

                                                                    <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" />  

                                                                    <p:gmapInfoWindow >  
                                                                        <p:outputPanel  style="text-align:center;display:block;margin:auto; overflow: visible; width: 300px; ">   
                                                                            <h:panelGrid columns="2" >
                                                                                <h:graphicImage library="images" name="pin_1.png" alt="pin"   styleClass="images" /> 
                                                                                <h:outputText value="#{record.locality}"  style=" font-size: 9px;" />   
                                                                                <h:column />
                                                                                <h:outputText value="#{record.lat} -- #{record.lnt}" style=" font-size: 9px;" />  
                                                                            </h:panelGrid> 
                                                                        </p:outputPanel>   
                                                                    </p:gmapInfoWindow>  
                                                                </p:gmap> 
                                                            </f:view>  
                                                        </h:panelGrid>
                                                        <p:spacer width="50" height="20" />
                                                        <h:panelGroup layout="block">  
                                                            <h:commandLink action="#{search.showmap(record)}" value="#{msg.showmap}" 
                                                                       rendered="#{record.coordinate == 0}" style="font-family: Arial,sans-serif;">    
                                                            <f:ajax render=":searchform:result"/>
                                                        </h:commandLink>   
                                                        <p:spacer width="10" height="5" /> 

                                                        <h:outputLink id="scientificNumLinkNrmdetail" value="http://naturforskaren.se/search/#{record.fullname.trim()}"  
                                                                      title="scientificname"  target="_blank" >  
                                                            <h:outputText value="#{msg.showintaxonpages}"  style="font-family: Arial,sans-serif;" />   
                                                        </h:outputLink> 

                                                        <p:spacer width="10" height="5" />
                                                        
                                                        <p:commandLink value="#{msg.errorreport}"    process="@this"  global="false"
                                                                                   action="#{search.errorreport(record)}" 
                                                                                   update=":searchform:result :searchform:welcomepagepanel" /> 
                                                        
                                                        <ui:remove>
                                                            <p:commandLink value="#{msg.errorreport}" oncomplete="PF('dlg').show();"  
                                                                       action="#{search.errorreport(record)}"     
                                                                       update=":searchform:errorreportPanel" /> 
                                                        </ui:remove>
                                                        
                                                    </h:panelGroup> 

                                                    <p:spacer width="50" height="20" />
                                                </h:panelGrid> 
                                                </p:column>   
                                            </p:dataTable>  
                                        </h:panelGrid> 
                                    </h:panelGrid> 
                                    
                                    <h:panelGrid id="allimagePanel" columns="2" columnClasses="alignTop,alignTop"   rendered="#{search.resultview == 4}" style="width: 700px; float:right;" >  
                                        
                                        <h:panelGrid width="200">  
                                            <h:outputText value="#{msg.imagefilter}"  style="font-family: Arial,sans-serif; font-weight: bold; " /> 
                                            <p:panel header="#{msg.selectview}" id="selectViewPanel" >   
                                                <h:selectManyCheckbox value="#{galleriaBean.viewList}" layout="pageDirection" >
                                                    <f:selectItem itemValue="all" itemLabel="#{msg.all}" />
                                                    <f:selectItem itemValue="label" itemLabel="#{msg.label}" />
                                                    <f:selectItem itemValue="dorsal" itemLabel="#{msg.dorsal}" />
                                                    <f:selectItem itemValue="ventral" itemLabel="#{msg.ventral}" />
                                                    <f:selectItem itemValue="lateral" itemLabel="#{msg.lateral}" />
                                                    <f:selectItem itemValue="frontal" itemLabel="#{msg.frontal}" />
                                                    <f:selectItem itemValue="caudal" itemLabel="#{msg.caudal}" />

                                                    <f:ajax render="allimagePanel" listener="#{galleriaBean.selectViews}" event="change" execute="@this" /> 
                                                </h:selectManyCheckbox> 
                                            </p:panel>  
                                            
                                            <p:panel header="#{msg.selectpart}" id="selectPartPanel" >  
                                                <h:selectManyCheckbox value="#{galleriaBean.partsList}" layout="pageDirection" >
                                                    <f:selectItem itemValue="all" itemLabel="#{msg.all}"  />  
                                                    <f:selectItem itemValue="abdomen" itemLabel="#{msg.abdomen}" />  
                                                    <f:selectItem itemValue="face"  itemLabel="#{msg.face}"/>   
                                                    <f:selectItem itemValue="genitalia" itemLabel="#{msg.genitalia}" />  
                                                    <f:selectItem itemValue="wings"  itemLabel="#{msg.wings}"/>  
                                                    <f:selectItem itemValue="head" itemLabel="#{msg.head}" />  
                                                    <f:selectItem itemValue="legs"  itemLabel="#{msg.legs}"/>  
                                                    <f:selectItem itemValue="lobe" itemLabel="#{msg.lobe}" />  
                                                    <f:selectItem itemValue="pronotum"  itemLabel="#{msg.pronotum}"/>  
                                                    <f:selectItem itemValue="vari" itemLabel="#{msg.vari}" />  
                                                    <f:selectItem itemValue="mesonotum"  itemLabel="#{msg.mesonotum}"/>  
                                                    <f:selectItem itemValue="posterior" itemLabel="#{msg.posterior}" />  
                                                    <f:selectItem itemValue="palps"  itemLabel="#{msg.palps}"/>  
                                                    <f:selectItem itemValue="tarsi" itemLabel="#{msg.tarsi}" />  
                                                    <f:selectItem itemValue="labrum"  itemLabel="#{msg.labrum}"/>  
                                                    <f:selectItem itemValue="/notum/" itemLabel="#{msg.notum}" />  
                                                    <f:selectItem itemValue="mouth"  itemLabel="#{msg.mouth}"/>  
                                                    <f:selectItem itemValue="chelicerae" itemLabel="#{msg.chelicerae}" />   

                                                    <p:ajax event="change" listener="#{galleriaBean.selectParts}" global="false"  update="allimagePanel" />   
                                                </h:selectManyCheckbox> 
                                            </p:panel> 
                                             
                                            <p:panel header="#{msg.selectsex}" id="selectSexPanel" >  
                                                <h:selectManyCheckbox value="#{galleriaBean.sexList}" layout="pageDirection" >
                                                    <f:selectItem itemValue="all" itemLabel="#{msg.all}" />  
                                                    <f:selectItem itemValue="/male/" itemLabel="#{msg.male}" />  
                                                    <f:selectItem itemValue="female"  itemLabel="#{msg.female}"/>   
                                                    <f:ajax render="allimagePanel" listener="#{galleriaBean.selectSexes}" event="change" execute="@this" />  
                                                </h:selectManyCheckbox>  
                                            </p:panel> 
                                            
                                            <p:panel header="#{msg.selectstage}" id="selectStagePanel" >  
                                                <h:selectManyCheckbox value="#{galleriaBean.stageList}" layout="pageDirection" >
                                                    <f:selectItem itemValue="all" itemLabel="#{msg.all}" />  
                                                    <f:selectItem itemValue="larva" itemLabel="#{msg.larva}" />  
                                                    <f:selectItem itemValue="adult"  itemLabel="#{msg.adult}"/>   
                                                    <f:ajax render="allimagePanel" listener="#{galleriaBean.selectStages}" event="change" execute="@this" />  
                                                </h:selectManyCheckbox>   
                                            </p:panel>  
                                        </h:panelGrid >
                                            
                                        <h:panelGrid width="500">   
                                            <ui:repeat value="#{galleriaBean.mbImages}" var="mbimage" > 
                                                <p:outputPanel deferred="true" deferredMode="visible" autoUpdate="true" 
                                                               layout="block" style="width: 500px; float:right;"  >  
                                                    <ui:repeat value="#{mbimage}" var="thumb" >  
                                                            <p:commandLink  action="#{imageSwitcher.imageSwitch(thumb)}" 
                                                                            oncomplete="PF('imgswitchdlg').show();" update=":searchform:imageswitchpanel">
                                                                <p:graphicImage value="#{thumb.thumb}" title="#{thumb.name}/#{thumb.catalogNumber}" 
                                                                                alt="#{thumb.catalogNumber}" style="padding: 5px; border: none;"  /> 
                                                     
                                                            </p:commandLink>  
                                                        
                                                        
                                                    </ui:repeat> 
                                                </p:outputPanel>  
                                            </ui:repeat> 
                                        </h:panelGrid >
                                    </h:panelGrid>   
                                     
                   
                                    <h:panelGrid id="globe" rendered="#{search.resultview == 3}">    
                                        <p:gmap center="#{geoMap.centerLat},#{geoMap.centerLng}" zoom="#{geoMap.zoom}" 
                                                type="ROADMAP"  id="largeMap"   mapTypeControl="false"   streetView="true"
                                                fitBounds="false" 
                                                model="#{geoMap.model}"  style="width:700px;height:400px"  widgetVar="myMap" >  
                                             
                                            <p:ajax event="stateChange" listener="#{geoMap.onStateChange}" 
                                                    update="colorpanel largeMap" partialSubmit="true"  />  

                                            <p:ajax event="overlaySelect" listener="#{geoMap.onMarkerSelect}" 
                                                    partialSubmit="true"  /> 
                                            
                                             
                                            
                                            <p:gmapInfoWindow >  
                                                <p:outputPanel  style="text-align:center;display:block;margin:auto; overflow: visible; width: 300px; " >   
                                                    <h:panelGrid columns="2" >
                                                        <h:graphicImage library="images" name="pin_1.png" alt="pin"   styleClass="images" />  
                                                        <h:outputText value="#{geoMap.taxon}" style=" font-size: 9px;" />  
                                                        <h:column />
                                                        <h:outputText value="#{geoMap.locality}"  style=" font-size: 9px;" />   
                                                        <h:column />
                                                        <h:outputText value="#{geoMap.coordinate}" style=" font-size: 9px;"  />  

                                                        <h:column />
                                                        <h:panelGrid columns="3" style="font-size: 9px; float: right;" rendered="#{geoMap.infoLink == 0}"> 
                                                            <p:commandLink value="#{msg.showdetail}"  oncomplete="PF('detailDlg').show()"  
                                                                           action="#{search.detail(geoMap.selectedRecord)}"     
                                                                           update=":searchform:detailDlgPanel"   
                                                                           style="font-size: 10px; float: right; text-decoration: underline;"/> 
                                                            <p:spacer width="10" height="30" />
                                                            
                                                            
                                                            
                                                            <p:commandLink value="#{msg.errorreport}"    process="@this"  global="false"
                                                                                   action="#{search.errorreportFromMap(geoMap.selectedRecord)}" 
                                                                                   update=":searchform:result :searchform:welcomepagepanel"
                                                                                   style="font-size: 10px; float: right; text-decoration: underline;" /> 
                                                            <ui:remove>
                                                                <p:commandLink value="#{msg.errorreport}" oncomplete="PF('dlg').show()" 
                                                                           action="#{search.errorreportFromMap(geoMap.selectedRecord)}"     
                                                                           update=":searchform:errorreportPanel"  
                                                                           style="font-size: 10px; float: right; text-decoration: underline;"/> 
                                                            </ui:remove>
                                                            
                                                        </h:panelGrid> 
                                                        
                                                        <h:panelGrid style="font-size: 9px; float: right;" rendered="#{geoMap.infoLink == 1}"> 
                                                            <p:commandLink value="#{msg.showdetail}"  
                                                                           action="#{search.listMapData(geoMap.records)}"     
                                                                           update=":searchform:result"   
                                                                           style="font-size: 10px; float: right; text-decoration: underline;"/> 
                                                        </h:panelGrid>
                                                    </h:panelGrid> 
                                                </p:outputPanel>   
                                            </p:gmapInfoWindow>  
                                        </p:gmap>     
   
                                        <h:panelGrid  id="colorpanel"  >
                                            <h:panelGrid  style="border: solid 1px #A9A9A9;"  rendered="#{geoMap.colors.size() > 0}" >
                                                <h:outputText value="Density"   />
                                                <hr />
                                                <h:panelGroup layout="block"> 
                                                    <h:outputText value="#{geoMap.min} " />   
                                                    
                                                    <ui:repeat value="#{geoMap.colors}" var="color">   
                                                        <p:spacer width="5" height="5" />
                                                        <p:spacer width="12" height="10" style="background-color: #{color};" /> 
                                                    </ui:repeat>
                                                    <p:spacer width="5" height="5" /> 
                                                    <h:outputText value="#{geoMap.max}"   />
                                                </h:panelGroup>
 
                                            </h:panelGrid>
                                        </h:panelGrid>
                                        
                                      
                                            
                                    </h:panelGrid>
                                    
 
                                </h:panelGrid> 

                                <p:spacer width="20" />

                                <h:panelGrid styleClass="statisticColumn"  >
                                    <h:outputText value="#{msg.addfilter}:" style="font-weight: bold;"  />   

                                    <p:spacer width="20" height="20" />
                                    
                                    <h:commandLink action="#{search.searchwithmap}" rendered="#{statistic.totalWithMap > 0}" >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datawithmap}" />  
                                            <h:outputText value="#{statistic.totalWithMap}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result"   />
                                    </h:commandLink> 


                                    <h:commandLink action="#{search.searchwithtype}"  rendered="#{statistic.totalType > 0}" >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.typeddata}" />  
                                            <h:outputText value="#{statistic.totalType}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result"  />
                                    </h:commandLink>  
                                    
                                    <h:commandLink action="#{search.searchwithimages}"  rendered="#{statistic.totalWithImage > 0}" >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.specimenswithimage}" />  
                                            <h:outputText value="#{statistic.totalWithImage}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result"  />
                                    </h:commandLink> 

                                    <h:commandLink action="#{search.searchinsweden}" rendered="#{statistic.totalInSweden > 0}"  >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datainsweden}" />  
                                            <h:outputText value="#{statistic.totalInSweden}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result"    />
                                    </h:commandLink> 

                                    <h:commandLink action="#{search.searchdna}" rendered="#{statistic.totalDNA > 0}"   >   
                                        <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                            <h:outputText value="#{msg.datawithdnasequence}" />  
                                            <h:outputText value="#{statistic.totalDNA}" />
                                        </h:panelGrid> 
                                        <f:ajax render=":searchform:result"    />
                                    </h:commandLink> 

                                    <p:spacer width="20" height="30" />

                                    <h:outputText value="#{msg.collection}" style="font-weight: bold;" />    

                                    <ui:repeat var="collection" value="#{statistic.statisticData.collections}" varStatus="collectionStatus" >   
                                        <h:commandLink action="#{search.searchCollection(collection)}"   
                                                       title="#{collection.name}"  >   
                                            <h:panelGrid columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                                <h:outputText value="#{collection.shortName}" />  
                                                <h:outputText value="#{collection.total}" />
                                            </h:panelGrid> 
                                            <f:ajax render=":searchform:result"  />
                                        </h:commandLink>    
                                    </ui:repeat> 

                                    <p:spacer width="20" height="30" />
                                    <h:outputText value="#{msg.institution}" style="font-weight: bold;"/>   
                                    <ui:repeat var="institutiondata" value="#{statistic.statisticData.institutionDataList}" varStatus="collectionStatus" >   
                                        <h:commandLink action="#{search.institutiondata(institutiondata)}"   
                                                       title="#{institution.institution}"  rendered="#{institutiondata.numOfRecords > 0}"   >   
                                            <h:panelGrid id="institutionpanel" columns="2" columnClasses="leftcolumn,rightcolumn" cellpadding="0" cellspacing="0" > 
                                                <h:outputText value="#{institutiondata.institution}"  />  
                                                <h:outputText value="#{institutiondata.numOfRecords}" />
                                            </h:panelGrid> 
                                            <f:ajax render=":searchform:result"   />
                                        </h:commandLink>  
                                    </ui:repeat> 

                                    <p:spacer width="20" height="30" />
                                    <h:panelGrid  id="querypanel">    
                                        <h:panelGrid style="font-weight: bold; "  rendered="#{search.queries.size() > 0}">
                                            <h:outputText value="#{msg.filter}"  />
                                        </h:panelGrid>
                                        <h:panelGrid style="border: solid 1px; width: 210px; " rendered="#{search.queries.size() > 0}" >    
                                            <ui:repeat var="query" value="#{search.queries.entrySet().toArray()}" varStatus="status">   
                                                <h:panelGrid  columns="3" columnClasses="alignTop,alignTop,alignTop">  
                                                    <h:outputText value="#{query.value}" rendered="#{query.key == 'Institution'}"  style="font-size: 10px;" /> 
                                                    <h:outputText value="#{query.value}" rendered="#{query.key == 'Collection'}"  style="font-size: 10px;" /> 
                                                    <h:outputText value="#{msg.datawithmap}" rendered="#{query.key == 'Map'}" style="font-size: 10px;" />  
                                                    <h:outputText value="#{msg.typeddata}" rendered="#{query.key == 'Type'}" style="font-size: 10px;" />  
                                                    <h:outputText value="#{msg.datainsweden}" rendered="#{query.key == 'Sweden'}" style="font-size: 10px;" /> 
                                                    <h:outputText value="#{msg.specimenswithdna}" rendered="#{query.key == 'DNA'}" style="font-size: 10px;" /> 
                                                    <h:outputText value="#{msg.specimenswithimage}" rendered="#{query.key == 'Image'}" style="font-size: 10px;" /> 
                                                    <h:outputText value="#{msg.coordinates}: #{query.value}" rendered="#{query.key == 'geopoint'}" style="font-size: 10px;" /> 
                                                    <p:spacer width="5"  />
                                                    <h:commandLink action="#{search.removeFilter(query.key, query.value)}"    > 
                                                        <h:graphicImage library="images" name="icons/RemoveRecord16x16.png" 
                                                                        alt="#{msg.removequery}" title="#{msg.removequery}" styleClass="images" />
                                                        <f:ajax render=":searchform:querypanel :searchform:result"   />
                                                    </h:commandLink>  
                                                </h:panelGrid>
                                            </ui:repeat> 

                                            <h:panelGrid  columns="2"  > 
                                                <h:commandLink action="#{search.removeAllQueries}"    >  
                                                    <h:outputText value="#{msg.removeAllQueries}" style="font-size: 10px;" />   
                                                    <f:ajax render=":searchform:querypanel :searchform:result"  />
                                                </h:commandLink>  
                                                <p:spacer width="5"  /> 
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </h:panelGrid> 
                                </h:panelGrid>  
                            </h:panelGrid> 
                        </h:panelGroup> 
                    </h:panelGroup> 

                    
                    
                    <!-- footer -->
                    <h:panelGroup id="contactfootpanel" styleClass="contactfootpanel" layout="block">
                        <hr/>
                        <h:panelGroup style="padding-left: 20px;" layout="block">
                            <h:commandLink action="#{search.contactus}"    >  
                                <h:outputText value="#{msg.contactus}" />   
                                <f:ajax render=":searchform:result welcomepagepanel" /> 
                            </h:commandLink> 
                        </h:panelGroup> 
                    </h:panelGroup>
                </h:panelGrid>

                
                
                
                
                <!-- reports -->
                <h:panelGrid id="exportDataTablePDFPanel" cellpadding="0" cellspacing="0" styleClass="searchColumn" rendered="false"> 
 
                    <p:dataTable id="exportDataTablePDF" var="record" 
                                 value="#{search.exportRecords}"   
                                 paginator="true" rows="10"     lazy="true" >    

                        <p:column>     
                            <h:outputText value="#{msg.cataloguenumber}: #{record.newTab}  #{record.catalogNum} #{record.newLine}" escape="false" />   

                            <h:outputText value="#{msg.speciesname}: #{record.newTab} #{record.name} #{record.newLine}" />   

                            <h:outputText value="#{msg.family}: #{record.newTab}  #{record.highTaxon} #{record.newLine}" />  
                            <h:outputText value="#{msg.type}: #{record.newTab} #{record.type} #{record.newLine}"  />  
                            <h:outputText value="#{msg.author}: #{record.newTab}  #{record.auth} #{record.newLine}"  />   
                            <h:outputText value="#{msg.synonyms}: #{record.newTab}  #{record.sym} #{record.newLine}" />  
                            <h:outputText value="#{msg.stationfieldnumber}: #{record.newTab} #{record.stationFieldNumber} #{record.newLine}"  />  
                            <h:outputText value="#{msg.collectiondate}: #{record.newTab}"  />      
                            <h:outputText value="#{record.startDate}"  >
                                <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                            </h:outputText>
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.locality}: #{record.newTab} #{record.locality}"   />  
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.country}: #{record.newTab} #{record.country}"  />   
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.continent}: #{record.newTab} #{record.continent}"   />  
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.coordinate}: #{record.newTab} #{record.lat} -- #{record.lnt}" />  
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.collector}: #{record.newTab} #{record.collector}" />  
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.determiner}: #{record.newTab} #{record.determiner}" />    
                            <h:outputText value="#{record.newLine}" /> 
                            <h:outputText value="#{msg.remarks}: #{record.newTab} #{record.remarkList}" />     
                            
                        </p:column>      
                    </p:dataTable> 

                </h:panelGrid>




                <h:panelGrid id="exportDataTablePanel" cellpadding="0" cellspacing="0" styleClass="searchColumn" rendered="false"> 
 
                    <p:dataTable id="exportDataTable" var="record" value="#{search.exportRecords}"   
                                 paginator="true" rows="#{search.numDisplay}"  >    

                        <p:column>   
                            <f:facet name="header">  
                                <h:outputText value="#{msg.cataloguenumber1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.catalogNum}" />   
                        </p:column> 

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.speciesname}" />  
                            </f:facet> 
                            <h:outputText value="#{record.name}" />   
                        </p:column> 

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.family}" />  
                            </f:facet> 
                            <h:outputText value="#{record.highTaxon}" />  
                        </p:column> 
                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.type}" />  
                            </f:facet> 
                            <h:outputText value="#{record.type}"  />  
                        </p:column> 

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.author}" />  
                            </f:facet> 
                            <h:outputText value="#{record.auth}"  />  
                        </p:column>  

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.synonyms}" />  
                            </f:facet> 
                            <h:outputText value="#{record.sym}"  />  
                        </p:column>  

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.stationfieldnumber1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.stationFieldNumber}"  />  
                        </p:column>  

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.collectiondate1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.startDate}"  >
                                <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                            </h:outputText>  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.locality}" />  
                            </f:facet> 
                            <h:outputText value="#{record.locality}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.country}" />  
                            </f:facet> 
                            <h:outputText value="#{record.country}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.continent1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.continent}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.coordinate}" />  
                            </f:facet> 
                            <h:outputText value="#{record.lat} -- #{record.lnt}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.collector1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.collector}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.determiner1}" />  
                            </f:facet> 
                            <h:outputText value="#{record.determiner}"  />  
                        </p:column>

                        <p:column> 
                            <f:facet name="header">  
                                <h:outputText value="#{msg.remarks}" />  
                            </f:facet>     
                            <h:outputText value="#{record.remarkList}" />  
                        </p:column> 
                    </p:dataTable> 

                </h:panelGrid>


                <h:panelGroup id="dialogsPanel" layout="block"> 
                    <p:dialog id="detailDialog" header="#{msg.showdetail}" widgetVar="detailDlg" modal="true" height="450" width="700" >  
                        <h:panelGrid columns="2" columnClasses="detailDlgLabel,detailDlgText"   id="detailDlgPanel"> 

                            <h:outputText value="#{msg.cataloguenumber}:" />   
                            <h:outputText value="#{search.record.catalogNum}" />  


                            <h:outputText value="#{msg.speciesname}:" />   
                            <h:outputText value="#{search.record.name}" /> 

                            <h:outputText value="#{msg.highertaxa}:" />   
                            <h:outputText value="#{search.record.highTaxon}" />

                            <h:outputText value="#{msg.collection}:" />   
                            <h:outputText value="#{search.record.collectionName}" />

                            <h:outputText value="#{msg.type}:"  />   
                            <h:outputText value="#{search.record.type}" /> 

                            <h:outputText value="#{msg.author}:"  />   
                            <h:outputText value="#{search.record.auth}" /> 

                            <h:outputText value="#{msg.synonyms}:" />   
                            <h:outputText value="#{search.record.sym}" /> 

                            <h:outputText value="#{msg.stationfieldnumber}:"  />   
                            <h:outputText value="#{search.record.stationFieldNumber}" /> 

                            <h:outputText value="#{msg.collectiondate}:"  />     
                            <h:outputText value="#{search.record.startDate}"  >
                                <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                            </h:outputText>

                            <h:outputText value="#{msg.catalogeddate}:"  />     
                            <h:outputText value="#{search.record.catalogedDate}"  >
                                <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" />
                                <!--                                                                <f:convertDateTime pattern="yyyy-MM-dd"  />-->
                            </h:outputText>

                            <h:outputText value="#{msg.locality}:"   />   
                            <h:outputText value="#{search.record.locality}" /> 

                            <h:outputText value="#{msg.country}:"  />   
                            <h:outputText value="#{search.record.country}" />   

                            <h:outputText value="#{msg.continent}:"   />   
                            <h:outputText value="#{search.record.continent}" />  

                            <h:outputText value="#{msg.coordinate}:" />    
                            <h:panelGroup layout="block" rendered="#{search.record.coordinate == 0}" >
                                <h:outputText value="#{search.record.lat}" /> -- <h:outputText value="#{search.record.lnt}" />
                            </h:panelGroup>

                            <h:panelGrid rendered="#{search.record.coordinate != 0}">  
                                <p:spacer width="10" height="10" />
                            </h:panelGrid> 

                            <h:outputText value="#{msg.collector}:" />   
                            <h:outputText value="#{search.record.collector}" />   

                            <h:outputText value="#{msg.determiner}:" />   
                            <h:outputText value="#{search.record.determiner}" />   

                            <h:outputText value="#{msg.remarks}:" />  
                            <h:panelGrid cellpadding="0" cellspacing="0">
                                <ui:repeat value="#{search.record.remarks}" var="remark">   
                                    <h:outputText value="#{remark}" />  <br />
                                </ui:repeat>  
                            </h:panelGrid>

                        </h:panelGrid>
                    </p:dialog> 



                    <!-- ################################################ error report ############################################## --> 
 

                        <p:dialog id="modalDialog" header="#{msg.errorreport}" widgetVar="dlg" modal="true" height="500" width="710" >  

                            <h:panelGrid  id="errorreportPanel"  style="width: 690px; height: 100%; overflow: auto;">
                                
                                <ui:remove>
                                <h:panelGrid columns="3" columnClasses="errorcol3,errorcol1,errorcol2">  
                                    <h:selectBooleanCheckbox value="#{errorReportBean.catalogNumber}" />
                                    <h:outputText value="#{msg.cataloguenumber}:" styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.catalogNum}" /> 

                                    <h:selectBooleanCheckbox value="#{errorReportBean.specimenName}" />
                                    <h:outputText value="#{msg.speciesname}:" styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.name}" />  

                                    <h:selectBooleanCheckbox value="#{errorReportBean.family}" />
                                    <h:outputText value="#{msg.family}:" styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.highTaxon}" />  

                                    <h:selectBooleanCheckbox value="#{errorReportBean.typeinfo}" />
                                    <h:outputText value="#{msg.type}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{dinaController.mapdata.detail.typeMaterial}" /> 

                                    <h:selectBooleanCheckbox value="#{errorReportBean.collector}" />
                                    <h:outputText value="#{msg.collector}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.collector}" /> 

                                    <h:selectBooleanCheckbox value="#{errorReportBean.date}" />
                                    <h:outputText value="#{msg.collectiondate}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.startDate}" />   

                                    <h:selectBooleanCheckbox value="#{errorReportBean.locality}" />
                                    <h:outputText value="#{msg.locality}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.locality}" />   

                                    <h:selectBooleanCheckbox value="#{errorReportBean.country}" />
                                    <h:outputText value="#{msg.country}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.country}" />   

                                    <h:selectBooleanCheckbox value="#{errorReportBean.coordinate}" />
                                    <h:outputText value="#{msg.coordinate}:"  styleClass="boldtext" />   
                                    <h:outputText value="#{search.record.lat} -- #{search.record. lnt}" /> 


                                    <h:selectBooleanCheckbox value="#{errorReportBean.otherinfo}" />
                                    <h:outputText value="#{msg.remarks}:"  styleClass="boldtext" />   
                                    <h:panelGrid cellpadding="0" cellspacing="0">
                                        <ui:repeat value="#{search.record.remarks}" var="remark">   
                                            <h:outputText value="#{remark}" />  <br />
                                        </ui:repeat>  
                                    </h:panelGrid>

                                    <h:selectBooleanCheckbox value="#{errorReportBean.determinater}" />
                                    <h:outputText value="#{msg.determiner}:"  styleClass="boldtext" />    
                                    <h:outputText value="#{search.record.determiner}"/>  

                                </h:panelGrid>

                                <h:panelGrid width="580">
                                    <hr />
                                    <h:outputText value="#{msg.errordesc}"  styleClass="boldtext" />  
                                    <h:inputTextarea value="#{errorReportBean.errorDesc}" rows="8"  cols="110"   /> 
                                </h:panelGrid>
 
                                

                                <p:message for="senderrorreport" />
                                <h:panelGrid columns="2">
                                    <p:spacer width="560" height="5" /> 
                                    <p:commandButton value="#{msg.sendbutton}" id="senderrorreport"
                                                     actionListener="#{search.senderrorreport}"   
                                                     oncomplete="PF('dlg').hide()"   global="false" /> 
                                </h:panelGrid> 
                                <h:column />
                                <h:column />
                                </ui:remove>
                            </h:panelGrid> 
                        </p:dialog>     
              


                    <!-- advance result in map -->

                </h:panelGroup>

 
            </h:form>
        </ui:define>
        </ui:composition>
    </body>
</html>