<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui"  
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"    >

  <body>
    <ui:composition>     
      <p:dataTable id="checkedTable" var="record" value="#{searchBean.selectedRecords}"  
                   paginator="true" rows="10" styleClass="noheader"   
                   paginatorPosition="bottom"
                   paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                   rowsPerPageTemplate="5,10,15" >  

        <p:column> 
          <h:selectBooleanCheckbox  value="#{record.selected}" > 
            <p:ajax event="click" update=":resultsForm:resultContent" process="@this" global="false"
                                  listener="#{searchBean.removeone(record)}"  /> 
          </h:selectBooleanCheckbox> 
        </p:column> 
        <p:column>  
          <h:panelGrid columns="2" columnClasses="simpleTableLabelCol,simpleTableValueCol"  
                       cellpadding="0" cellspacing="0"> 

            <h:outputText value="#{msg.cataloguenumber}:" />   
            <h:outputText value="#{record.catalogNumber}" />  
 
            <h:outputText value="#{record.mineral ? msg.mineral : msg.speciesname}:" />   
            <h:outputText value="#{record.txFullName}" /> 

            <h:outputText value="#{msg.highertaxa}:" />   
            <h:outputText value="#{record.higherTx}" />

            <h:outputText value="#{msg.collection}:" />   
            <h:outputText value="#{record.collectionName}" />

            <h:outputText value="#{msg.type}:"  />   
            <h:outputText value="#{record.typeStatus}" /> 
            
            <h:outputText value="#{msg.minAssociatedMineral}:" rendered="#{record.mineral}" />   
            <h:outputText value="#{record.taxaList}" rendered="#{record.mineral}" /> 
            
            <h:outputText value="#{msg.serie}:" rendered="#{record.mineral}" />   
            <h:outputText value="#{record.serie}" rendered="#{record.mineral}" /> 

            <h:outputText value="#{msg.author}:"  />   
            <h:outputText value="#{record.authors}" /> 

            <h:outputText value="#{msg.synonyms}:" />   
            <h:outputText value="#{record.synonyms}" /> 
            
            <h:outputText value="#{msg.preparationstype}:" />   
            <h:outputText value="#{record.prepCountList}" /> 

            <h:outputText value="#{msg.stationfieldnumber}:"  />   
            <h:outputText value="#{record.stationFieldNumber}" /> 

            <h:outputText value="#{msg.collectiondate}:"  />     
            <h:outputText value="#{record.startDate}"  >
              <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" /> 
            </h:outputText>

            <h:outputText value="#{msg.catalogeddate}:"  />     
            <h:outputText value="#{record.catalogedDate}"  >
              <f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+3" /> 
            </h:outputText>

            <h:outputText value="#{msg.locality}:"   />   
            <h:outputText value="#{record.locality}" /> 
             
            <h:outputText value="#{msg.localityCounty}:"   />   
            <h:outputText value="#{record.county}" /> 
             
            <h:outputText value="#{msg.state}:"   />   
            <h:outputText value="#{record.state}" /> 


            <h:outputText value="#{msg.country}:"  />   
            <h:outputText value="#{record.country}" />   

            <h:outputText value="#{msg.continent}:"   />   
            <h:outputText value="#{record.continent}" />  

            <h:outputText value="#{msg.coordinate}:" />    
            <h:panelGroup layout="block" rendered="#{record.coordinate == 0}" >
              <h:outputText value="#{record.coordinate}" />  
            </h:panelGroup>

            <h:panelGrid rendered="#{record.coordinate != 0}">  
              <p:spacer width="10" height="10" />
            </h:panelGrid> 

            <h:outputText value="#{msg.collector}:" />   
            <h:outputText value="#{record.collectors}" />   

            <h:outputText value="#{msg.determiner}:" />   
            <h:outputText value="#{record.determiner}" />   

            <h:outputText value="#{msg.remarks}:" /> 
            <h:panelGrid cellpadding="0" cellspacing="0">
              <ui:repeat value="#{record.remarks}" var="remark">   
                <h:outputText value="#{allRemarkes}" />  <br />
              </ui:repeat>  
            </h:panelGrid>

          </h:panelGrid>

          <ui:remove>
            <h:panelGrid  cellpadding="0" cellspacing="0" id="singleMapChecked">   
              <h:panelGrid rendered="#{record.displayMap}"> 
                <h:commandLink action="#{search.closeMap(record)}" value="#{msg.closemap}" rendered="#{record.coordinate == 0}">    
                  <f:ajax render="singleMapChecked"/>
                </h:commandLink> 
                <f:view> 
                  <p:gmap center="#{record.lat1}, #{record.lnt1}" type="ROADMAP"
                          zoom="8" model="#{mapBean.getAdvancedModel(record)}"
                          style="width:600px;height:300px" fitBounds="false"  
                          >  

                    <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" />  

                    <p:gmapInfoWindow >  
                      <p:outputPanel  style="text-align:center;display:block;margin:auto; overflow: visible; width: 300px; ">   
                        <h:panelGrid columns="2" >
                          <h:graphicImage library="images" name="pin_1.png" alt="pin"   styleClass="images" /> 
                          <h:outputText value="#{record.locality}"  style=" font-size: 9px;" />   
                          <h:column />
                          <h:outputText value="#{record.lat} -- #{record.lnt}" style=" font-size: 9px;" />  
                        </h:panelGrid> 
                      </p:outputPanel>   
                    </p:gmapInfoWindow>  
                  </p:gmap> 
                </f:view>  
              </h:panelGrid>
              <p:spacer width="50" height="20" />
              <h:panelGroup layout="block">  
                <h:commandLink action="#{search.showmap(record)}" value="#{msg.showmap}" 
                               rendered="#{record.coordinate == 0}" style="font-family: Arial,sans-serif;">    
                  <f:ajax render=":searchform:result"/>
                </h:commandLink>   
                <p:spacer width="10" height="5" /> 

                <h:outputLink id="scientificNumLinkNrmdetail" value="http://naturforskaren.se/search/#{record.fullname.trim()}"  
                              title="scientificname"  target="_blank" >  
                  <h:outputText value="#{msg.showintaxonpages}"  style="font-family: Arial,sans-serif;" />   
                </h:outputLink> 

                <p:spacer width="10" height="5" />

                <p:commandLink value="#{msg.errorreport}"    process="@this"  global="false"
                               action="#{search.errorreport(record)}" 
                               update=":searchform:result :searchform:welcomepagepanel" /> 

                <ui:remove>
                  <p:commandLink value="#{msg.errorreport}" oncomplete="PF('dlg').show();"  
                                 action="#{search.errorreport(record)}"     
                                 update=":searchform:errorreportPanel" /> 
                </ui:remove>

              </h:panelGroup> 

              <p:spacer width="50" height="20" />
            </h:panelGrid> 


          </ui:remove>
        </p:column>   
      </p:dataTable>   
    </ui:composition>
  </body>
</html>

